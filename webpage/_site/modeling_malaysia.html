<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Modeling - Malaysia</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">SE Asia</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="thailand.html">Thailand</a>
</li>
<li>
  <a href="malaysia.html">Malaysia</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="modeling_thailand.html">Modeling - Thailand</a>
</li>
<li>
  <a href="modeling_malaysia.html">Modeling - Malaysia</a>
</li>
<li>
  <a href="https://github.com/JGCRI/seasia">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<!-- Allow href to tabsets -->
<script type="text/javascript">
window.onload = function() {
  document.querySelector('a[href="' + window.location.href.match("#.*$") + '"]').click();
}

function goToTab() {
  var hash = String(window.location.href.match("#.*$"));
  var target = document.querySelector("a[role = 'tab'][href='" + hash + "']");
  if (target !== null) {
    var greatgrandparent = target.parentElement.parentElement.parentElement;
    if (greatgrandparent.getAttribute("role") == "tabpanel") {
      document.querySelector("a[role = 'tab'][href='#" + greatgrandparent.getAttribute("id") + "']").click();
    }
    target.click();
    target.scrollIntoView();
  }
}
window.onload = function() {
  setTimeout(goToTab, 100);
}
window.onhashchange = goToTab;
</script>
<style type="text/css">
script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"
</style>
<script type="text/javascript">
 $(document).ready(function() {
    $('body').prepend('<div class=\"zoomDiv\"><img src=\"\" class=\"zoomImg\"></div>');
    // onClick function for all plots (img's)
    $('img:not(.zoomImg)').click(function() {
      $('.zoomImg').attr('src', $(this).attr('src')).css({width: '100%'});
      $('.zoomDiv').css({opacity: '1', width: 'auto', border: '1px solid white', borderRadius: '5px', position: 'fixed', top: '50%', left: '50%', marginRight: '-50%', transform: 'translate(-50%, -50%)', boxShadow: '0px 0px 50px #888888', zIndex: '50', overflow: 'auto', maxHeight: '100%'});
    });
    // onClick function for zoomImg
    $('img.zoomImg').click(function() {
      $('.zoomDiv').css({opacity: '0', width: '0%'}); 
    });
  });
</script>
<!-- Set table styles -->
<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
</style>
<!-------------------------->
<!-------------------------->
<div id="download-gcam-se-asia" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Download GCAM SE
Asia</h1>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<p><br></p>
<p>Please use the link below to download GCAM.</p>
<table class="table table-bordered table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
File
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Location
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
gcamv5p3_seasia
</td>
<td style="text-align:left;">
<a href="https://zenodo.org/record/7259736/files/gcamv5p3_seasia.zip?download=1" style="     ">Link</a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>You will need the following prerequisites in order to run GCAM. You
will also need at least 8 GB of RAM.</p>
<table class="table table-bordered table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Prerequisite
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Link
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Java 64
</td>
<td style="text-align:left;">
<a href="https://www.java.com/en/download/" style="     ">Install Java
64</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:left;">
<a href="https://cran.r-project.org/" style="     ">Install R</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
RStudio
</td>
<td style="text-align:left;">
<a href="https://www.rstudio.com/" style="     ">Install RStudio</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Windows XML Maker
</td>
<td style="text-align:left;">
<a href="http://symbolclick.com/xmlmarker_1_1_setup.exe" style="     ">Install
Windows XML Maker</a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div id="guides" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Guides</h1>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<p><br></p>
<p>Below are links to an overview and walkthrough of GCAM.</p>
<table class="table table-bordered table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
File
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
GCAM overview presentation
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/gcam_overview.pdf" style="     ">gcam_overview.pdf</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
GCAM walkthrough presentation
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/gcam_walkthrough.pdf" style="     ">gcam_walkthrough.pdf</a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div id="scenarios" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Scenarios</h1>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<p>Below are links to the reference and policy scenarios that we will be
using.</p>
<table class="table table-bordered table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
File
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Business as Usual Scenario
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/configuration_seasia_cities_bau.xml" style="     ">configuration_seasia_cities_bau.xml</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Example Policy Scenario
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/configuration_seasia_cities_malaysia_policy.xml" style="     ">configuration_seasia_cities_policy.xml</a>
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!-------------------------->
</div>
<div id="policies" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Policies</h1>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<p>In general, three policy scenarios will be presented: a “low
ambition” and “high ambition” option as well as “ambitious city.” The
high ambition scenario uses key targets from policies and plans from
Kuala Lumpur and Malaysia. The low ambition scenario explores if these
targets are not met until a later target year, usually 2060 or 2070
instead of 2050. The ambitious city scenario represents Kuala Lumpur
hitting these high ambition targets, while the rest of Malaysia takes
longer to achieve the same goals. For a 2050 snapshot of policies that
will be modeled within each scenario, please reference the table
below.</p>
<p style="margin-left:1em;">
<p align="center">
<img src="images/malaysia_policy_table.png">
</p>
</p>
<p><br></p>
<p>The following subsections give additional details and explanations
for the policies listed above. (In progress. Will be expanded with
examples for each.)</p>
<div id="private-ice-phase-out" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Private ICE
Phase-out</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_low.xml" style="     ">trn_ICE_low.xml</a>
</td>
<td style="text-align:left;">
Phases liquids passenger vehicles out of the market by 2050
</td>
</tr>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_high.xml" style="     ">trn_ICE_high.xml</a>
</td>
<td style="text-align:left;">
Phases liquids passenger vehicles out of the market by 2030
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_ambitious_city.xml" style="     ">trn_ICE_ambitious_city.xml</a>
</td>
<td style="text-align:left;">
Phases liquids passenger vehicles out of the market by 2030 in KL, and
by 2050 in the rest of Malaysia
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
<p>The goal of this policy is to phase out internal combustion engine
(ICE) passenger vehicles from the market. The difference between the low
and high policies is the year in which ICE vehicles are completely
phased out of the market.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
<p>To represent an ICE vehicle phase-out, we decrease their shareweights
over time. The year in which the shareweights are 0 is the year in which
ICE vehicles are completely phased out of the market.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Background-------->
<!-------------------------->
<!-------------------------------------->
<!---Background - Share weights---------->
<!-------------------------------------->
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Share weights</b>
</p>
<p style="margin-left:1em;">
Share weights are assigned to different subsectors and technology
choices in GCAM to represent non-cost factors of consumer choice. They
are used primarily to calibrate market shares to historical data but can
also be modified to reflect factors such as infrastructure development
or shifting societal preferences. For more information on share weights
and how they are used in GCAM’s economic choice functions, see the <a
href="https://jgcri.github.io/gcam-doc/choice.html">GCAM economic
choice</a> documentation. Share weights should not be used to represent
cost-related policies. Additionally, shareweight interpolation rules
(<code>fixed</code>, <code>linear</code>, or <code>s-curve</code>) can
be used to automatically interpolate shareweights between given years.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory eg.
<code>./gcam-core/input/addons/malaysia</code>.</li>
<li>Download the desired ICE phase-out XML file (either <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_low.xml">trn_ICE_low.xml</a>,
<a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_high.xml">trn_ICE_high.xml</a>,
or <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/trn_ICE_ambitious_city.xml">trn_ICE_ambitious_city.xml</a>)
to the folder.</li>
<li>To adjust the year in which ICE vehicles are completely phased out:
within each <code>stub-technology</code> tag in the XML, change the
<code>to-year</code> in the first <code>interpolation-rule</code> and
the <code>from-year</code> in the second. Also change the
<code>year</code> of the <code>period</code> tag in which the
<code>share-weight</code> is 0.</li>
<li>Save the xml and then point to it in your configuration file by
adding the line:</li>
</ol>
</p>
<p style="font-size:0.8em">
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/trn_ICE_low.xml&lt;/Value&gt;</code>
</p>
</p>
<p></span></p>
</div>
<p><br></p>
</div>
<div id="publicprivate-vehicle-modal-shift" class="section level2"
number="4.2">
<h2><span class="header-section-number">4.2</span> Public/Private
Vehicle Modal Shift</h2>
<hr />
</div>
<div id="high-efficiency-appliances" class="section level2"
number="4.3">
<h2><span class="header-section-number">4.3</span> High Efficiency
Appliances</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_high.xml" style="     ">efficient_appliances_high.xml</a>
</td>
<td style="text-align:left;">
Increase prevelance of high-efficiency technologies (commercial and
residential) through 2050
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_low.xml" style="     ">efficient_appliances_low.xml</a>
</td>
<td style="text-align:left;">
Increase prevelance of high-efficiency technologies (commercial and
residential) through 2070
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_ambitious_city.xml" style="     ">efficient_appliances_ambitious_city.xml</a>
</td>
<td style="text-align:left;">
Increase prevelance of high-efficiency technologies (commercial and
residential) through 2050 in KL and 2070 in Rest of Malaysia
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
<p>The goal of this policy is to represent an increase in energy
efficient technologies in the commercial and residential sectors. The
difference between the low and high scenario versions of this policy is
the year in which the desired mix of technologies is achieved.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
We can adjust the shareweights for technologies like air conditioners,
water heaters, and other appliances to encourage the use of high
efficiency technologies and discourage the use of low efficiency
appliances.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Background-------->
<!-------------------------->
<!-------------------------------------->
<!---Background - Share weights---------->
<!-------------------------------------->
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Share weights</b>
</p>
<p style="margin-left:1em;">
Share weights are assigned to different subsectors and technology
choices in GCAM to represent non-cost factors of consumer choice. They
are used primarily to calibrate market shares to historical data but can
also be modified to reflect factors such as infrastructure development
or shifting societal preferences. For more information on share weights
and how they are used in GCAM’s economic choice functions, see the <a
href="https://jgcri.github.io/gcam-doc/choice.html">GCAM economic
choice</a> documentation. Share weights should not be used to represent
cost-related policies. Additionally, shareweight interpolation rules
(<code>fixed</code>, <code>linear</code>, or <code>s-curve</code>) can
be used to automatically interpolate shareweights between given years.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory:
<code>./gcam-core/input/addons</code>.</li>
<li>Download the desired xml file (either <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_high.xml">efficient_appliances_high.xml</a>,
<a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_low.xml">efficient_appliances_low.xml</a>,
or <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/efficient_appliances_ambitious_city.xml">efficient_appliances_ambitious_city.xml</a>
to the folder.</li>
<li>To adjust the year in which the target mix of technologies is
achieved: within each <code>stub-technology</code> tag in the XML,
change the <code>to-year</code> in the first
<code>interpolation-rule</code> and the <code>from-year</code> in the
second. Also change the <code>year</code> of the <code>period</code> tag
in which the <code>share-weight</code> is 0.</li>
<li>Save the xml and then point to it in your configuration file by
adding the line (replace <code>high</code> with <code>low</code> or
<code>ambitious_city</code> as needed):
<p style='font-size:0.8em'>
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/efficient_appliances_high.xml&lt;/Value&gt;</code></li>
</ol>
</p>
<p></span></p>
</div>
<p><br></p>
</div>
<div id="lighting-efficiency" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Lighting
Efficiency</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_high.xml" style="     ">buildings_led_high.xml</a>
</td>
<td style="text-align:left;">
Gradually phases non-LED residential lighting technology out of the
market by 2050
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_low.xml" style="     ">buildings_led_low.xml</a>
</td>
<td style="text-align:left;">
Gradually phases non-LED residential lighting technology out of the
market by 2070
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_ambitious_city.xml" style="     ">buildings_led_ambitious_city.xml</a>
</td>
<td style="text-align:left;">
Gradually phases non-LED residential lighting technology out of the
market by 2050 in KL and 2070 in Rest of Malaysia
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
<p>The goal of this policy is to represent increasing use of LED
lighting in residential buildings and the decreasing use of other, less
energy efficient lighting technologies. The difference between the low
and high scenario versions of this policy is the year in which 100% LED
residential lighting is achieved.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
We can gradually decrease the shareweights of all non-LED residential
lighting technologies in order to phase them out of the market. The year
in which the non-LED shareweights reach 0 corresponds with the year in
which 100% LED residential lighting is achieved.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Background-------->
<!-------------------------->
<!-------------------------------------->
<!---Background - Share weights---------->
<!-------------------------------------->
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Share weights</b>
</p>
<p style="margin-left:1em;">
Share weights are assigned to different subsectors and technology
choices in GCAM to represent non-cost factors of consumer choice. They
are used primarily to calibrate market shares to historical data but can
also be modified to reflect factors such as infrastructure development
or shifting societal preferences. For more information on share weights
and how they are used in GCAM’s economic choice functions, see the <a
href="https://jgcri.github.io/gcam-doc/choice.html">GCAM economic
choice</a> documentation. Share weights should not be used to represent
cost-related policies. Additionally, shareweight interpolation rules
(<code>fixed</code>, <code>linear</code>, or <code>s-curve</code>) can
be used to automatically interpolate shareweights between given years.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory:
<code>./gcam-core/input/addons</code>.</li>
<li>Download the desired xml file (either <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_high.xml">buildings_led_high.xml</a>,
<a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_low.xml">buildings_led_low.xml</a>,
or <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/buildings_led_ambitious_city.xml">buildings_led_ambitious_city.xml</a>)
to the folder.</li>
<li>To adjust the year in which 100% LED lighting is achieved: within
each non-LED <code>stub-technology</code> tag in the XML, change the
<code>to-year</code> in the first <code>interpolation-rule</code> and
the <code>from-year</code> in the second. Also change the
<code>year</code> of the <code>period</code> tag in which the
<code>share-weight</code> is 0.</li>
<li>Save the xml and then point to it in your configuration file by
adding the line (replace <code>high</code> with <code>low</code> or
<code>ambitious_city</code> as needed):
<p style='font-size:0.8em'>
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/buildings_led_high.xml&lt;/Value&gt;</code></li>
</ol>
</p>
<p></span></p>
</div>
<p><br></p>
</div>
<div id="industry-energy-efficiency" class="section level2"
number="4.5">
<h2><span class="header-section-number">4.5</span> Industry Energy
Efficiency</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_high.xml" style="     ">industry_aeei_high.xml</a>
</td>
<td style="text-align:left;">
Increases overall efficiency of industrial processes by 1% annually
through 2070
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_low.xml" style="     ">industry_aeei_low.xml</a>
</td>
<td style="text-align:left;">
Increases overall efficiency of industrial processes by 0.5% annually
through 2070
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_ambitious_city.xml" style="     ">industry_aeei_ambitious_city</a>
</td>
<td style="text-align:left;">
Increases overall efficiency of industrial processes by 1% annually
through 2070 for KL and by 0.5% annually for Rest of Malaysia
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
The goal of this policy is to represent measures to increase average
efficiency of industrial processes. The difference between the low and
high scenarios is the rate at which average industrial energy intensity
decreases annually.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
To represent a gradual increase in industrial efficiency, we can use
GCAM’s <code>aeei</code> parameter, which controls the autonomous energy
efficiency improvement (AEEI) of industrial processes.
</p>
<p></span></p>
</div>
<p><br></p>
<!--------------------------->
<!--------Background--------->
<!--------------------------->
<!-- TO DO: make background page for aeei -->
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory:
<code>./gcam-core/input/addons</code>.</li>
<li>Download the desired industrial aeei xml file (either <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_high.xml">industry_aeei_high.xml</a>,
<a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_low.xml">industry_aeei_low.xml</a>,
or <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/industry_aeei_low.xml">industry_aeei_ambitious_city.xml</a>)
to the folder.</li>
<li>To adjust the rate of industrial energy efficiency increase, change
the value of the <code>aeei</code> tag for each desired year.</li>
<li>Save the xml and then point to it in your configuration file by
adding the line (replace <code>high</code> with <code>low</code> or
<code>ambitious_city</code> as needed):</li>
</ol>
</p>
<p style="font-size:0.8em">
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/industry_aeei_high.xml&lt;/Value&gt;</code>
</p>
</p>
<p></span></p>
</div>
<p><br></p>
</div>
<div id="coal-phase-out" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Coal Phase-Out</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Both
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/no_new_coal.xml" style="     ">no_new_coal.xml</a>
</td>
<td style="text-align:left;">
Prevents additional coal capacity from being built starting in 2020
</td>
</tr>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/coal_shutdown_high.xml" style="     ">coal_shutdown_high.xml</a>
</td>
<td style="text-align:left;">
Retires existing coal capacity quickly; all coal is retired by 2050
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/coal_shutdown_low.xml" style="     ">coal_shutdown_low.xml</a>
</td>
<td style="text-align:left;">
Retires existing coal capacity more slowly; 95% of coal is retired by
2075
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
<p>The goal of this example is to phase out coal from Malaysia’s
electricity generation capacity. The difference between the high and low
scenarios is how quickly coal is phased out and the year in which the
phase-out is completed.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
<p>There are two steps to phase out coal generation. The first is to
prevent any new coal capacity from being built; we do this by setting
coal shareweights to 0 in all future years. The second step is to
gradually retire all existing coal capacity; we do this by shortening
coal technologies’ lifetimes and by assigning a shutdown curve to each
technology.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Background-------->
<!-------------------------->
<!--- TO DO: make background page for lifetime and s-curve-shutdown-decider --->
<!-------------------------------------->
<!---Background - Share weights---------->
<!-------------------------------------->
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Share weights</b>
</p>
<p style="margin-left:1em;">
Share weights are assigned to different subsectors and technology
choices in GCAM to represent non-cost factors of consumer choice. They
are used primarily to calibrate market shares to historical data but can
also be modified to reflect factors such as infrastructure development
or shifting societal preferences. For more information on share weights
and how they are used in GCAM’s economic choice functions, see the <a
href="https://jgcri.github.io/gcam-doc/choice.html">GCAM economic
choice</a> documentation. Share weights should not be used to represent
cost-related policies. Additionally, shareweight interpolation rules
(<code>fixed</code>, <code>linear</code>, or <code>s-curve</code>) can
be used to automatically interpolate shareweights between given years.
</p>
<p></span></p>
</div>
<p><br></p>
<!------------------------------------------------------>
<!---Background - Energy Technology Retirement---------->
<!------------------------------------------------------>
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Energy Technology Retirement </b>
</p>
<p style="margin-left:1em;">
For some energy technologies, such as coal, the “cohort” installed in
each period is modeled as a separate technology. Therefore, even if no
new capacity is installed in future years, output from the capacity
installed in previous years will still be modeled. There are several
GCAM parameters that determine the trajectory of output from previously
installed technology cohorts. The <code>lifetime</code> is the maximum
number of years for which the technology cohort can continue producing
output; i.e., a technology cohort installed in year <code>t</code> will
no longer produce any output in the year <code>t + lifetime</code>. The
<code>s-curve-shutdown-decider</code> is a function that controls the
speed at which the technology cohort retires, or reduces its output,
within its lifetime. This function depends on a <code>steepness</code>
parameter that determines the shape of the function as well as a
<code>half-life</code> parameter that sets the number of years after
which half of the technology cohort is retired. For more information on
retirement parameters, see the GCAM <a
href="https://jgcri.github.io/gcam-doc/en_technologies.html">Energy
Technologies</a> documentation.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory eg.
<code>./gcam-core/input/addons</code>.</li>
<li>Download the coal shareweight file <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/no_new_coal.xml">no_new_coal.xml</a>
as well as the desired coal retirement file (either <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/coal_shutdown_high.xml">coal_shutdown_high.xml</a>
or <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/coal_shutdown_low.xml">coal_shutdown_low.xml</a>)
to the folder.</li>
<li>To make custom adjustments to the coal retirement trajectory,
optionally change the following within each <code>stub-technology</code>
tag in the retirement XML:</li>
</ol>
</p>
<ul style="margin-left:4em; text-align:left;">
<li>
Use <code>lifetime</code> to adjust the year in which the coal phase-out
is complete; the phase-out will be complete <code>x</code> years after
2015, where <code>x</code> is the <code>lifetime</code>.
</li>
<li>
Use the <code>steepness</code> and <code>half-life</code> within the
<code>s-curve-shutdown-decider</code> to adjust the phaseout trajectory;
a smaller <code>half-life</code> and larger <code>steepness</code> will
result in a faster phase-out.
</li>
</ul>
<p style="margin-left:1em;">
<ol start="5" style="list-style-type: decimal">
<li>Save the xmls and then point to them in your configuration file by
adding the lines (replace <code>high</code> with <code>low</code> as
needed):
<p style='font-size:0.8em'>
<code>&lt;Value name = "scen"&gt;../input/addons/no_new_coal.xml&lt;/Value&gt;</code>
<code>&lt;Value name = "scen"&gt;../input/addons/coal_shutdown_high.xml&lt;/Value&gt;</code></li>
</ol>
</p>
</p>
<p></span></p>
</div>
<p><br></p>
</div>
<div id="electricity-generation-mix" class="section level2"
number="4.7">
<h2><span class="header-section-number">4.7</span> Electricity
Generation Mix</h2>
<hr />
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Scenario
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Files Used
</th>
<th style="text-align:left;color: white !important;background-color: #2A2A2A !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
All
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/data/malaysia/elec_gen_pathway.xlsx" style="     ">elec_gen_pathway.xlsx</a>
</td>
<td style="text-align:left;">
Excel spreadsheet that shows initial calculations to build this policy
</td>
</tr>
<tr>
<td style="text-align:left;">
All
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_link.xml" style="     ">elec_gen_link.xml</a>
</td>
<td style="text-align:left;">
Applies subsidies to relevant technologies in order to meet the
specified floors
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_low.xml" style="     ">elec_gen_low.xml</a>
</td>
<td style="text-align:left;">
Sets floors for renewable electricity generation technologies
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_hydro_low.xml" style="     ">elec_hydro_low.xml</a>
</td>
<td style="text-align:left;">
Sets exogenous hydropower generation
</td>
</tr>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_high.xml" style="     ">elec_gen_high.xml</a>
</td>
<td style="text-align:left;">
Sets floors for renewable electricity generation technologies
</td>
</tr>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_hydro_high.xml" style="     ">elec_hydro_high.xml</a>
</td>
<td style="text-align:left;">
Sets exogenous hydropower generation
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_ambitious_city.xml" style="     ">elec_gen_ambitious_city.xml</a>
</td>
<td style="text-align:left;">
Sets floors for renewable electricity generation technologies
</td>
</tr>
<tr>
<td style="text-align:left;">
Ambitious City
</td>
<td style="text-align:left;">
<a href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_hydro_ambitious_city.xml" style="     ">elec_hydro_ambitious_city.xmll</a>
</td>
<td style="text-align:left;">
Sets exogenous hydropower generation
</td>
</tr>
</tbody>
</table>
<!-------------------------->
<!----------Goal------------>
<!-------------------------->
<div class="warning"
style="background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>Goal</b>
</p>
<p style="margin-left:1em;">
<p>The goal of this example is to set a minimum value (floor) in GCAM
for the amount of electricity generation from three renewable energy
technologies (solar, hydro, and biomass) corresponding with the planned
percentages in the KLLCSBP2030 (below).</p>
<p align="center">
<img src="images/KL_2030_power.PNG">
</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Approach---------->
<!-------------------------->
<div class="warning"
style="background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Approach</b>
</p>
<p style="margin-left:1em;">
<p>One way to set a generation floor for each fuel type in GCAM is to
use a subsidy policy. This will lower the cost of the electricity
generation technology until the floor is reached. If there is more
demand for electricity than is supplied by the sum of the generation
floors, then the remaining demand will be met by a mix of fuels
determined by the market.</p>
<p>Hydropower is exogenous in GCAM and has a fixed pathway. The power
generation values for this technology are set explicitly using a fixed
output add-on XML.</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!--------Background-------->
<!-------------------------->
<!--------------------------------------------->
<!---Background - Policy portfolio standards--->
<!--------------------------------------------->
<div class="warning"
style="background-color:#EFFFC9; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<p><span></p>
<p style="text-align:center; font-size:24px">
<b>Background - Policy portfolio standards</b>
</p>
<p style="margin-left:1em;">
A <code>policy-portfolio-standard</code> in GCAM is a policy that can be
used to implement taxes, subsidies, floors, ceilings, and constraints.
Taxes and subsidies can be specified when the exact amount to be added
or subtracted to the price is known. However, a
<code>policy-portfolio-standard</code> can also contain a
<code>constraint</code>, which acts as either a floor or ceiling for the
technology or technologies included. Exact constraints can also be
implemented. See the <a
href="https://jgcri.github.io/gcam-doc/policies_examples.html">GCAM
Policy Examples</a> documentation for more information on how to
implement these options.
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->
<div class="warning"
style="background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="text-align:center; font-size:24px">
<b>GCAM Implementation</b>
</p>
<p style="margin-left:1em;">
<ol style="list-style-type: decimal">
<li>Create a folder in the input directory eg.
<code>./gcam-core/input/addons/malaysia</code>.</li>
<li>Download the example XML file ( <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_low.xml">elec_gen_low.xml</a>
and the subsidy link file <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_gen_link.xml">elec_gen_link.xml</a>
to the folder. (Click on <code>Raw</code> and then
<code>right-click</code> and select <code>save-as</code>.)</li>
<li>To make adjustments: within each
<code>policy-portfolio-standard</code> tag in the XML, adjust the
following:</li>
</ol>
</p>
<ul style="margin-left:4em; text-align:left;">
<li>
<code>constraint</code> for each year in which a floor is desired
</li>
<li>
Set <code>min-price</code> to a large negative value for years in which
an exact constraint, rather than a floor, is desired
</li>
</ul>
<p style="margin-left:1em;">
<ol start="4" style="list-style-type: decimal">
<li>Within each <code>supplysector</code> tag in the XML, make sure that
the corresponding <code>input-subsidy</code> is added within each
relevant <code>period</code> for each <code>stub-technology</code> you
wish to constrain.</li>
<li>To adjust the hydropower pathway, download the example XML file <a
href="https://github.com/JGCRI/seasia/blob/main/modeling/malaysia/elec_hydro_low">elec_hydro_low.xml</a>
to the folder.</li>
<li>Within each <code>fixedOutput</code> tag in the XML, adjust the
value to reflect desired hydropower output in each period. The user can
also add additional periods.</li>
<li>Save the XMLs and then point to them in your configuration file by
adding the lines:
<p style='font-size:0.9em'>
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/elec_gen_low.xml&lt;/Value&gt;</code>
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/elec_hydro_low.xml&lt;/Value&gt;</code>
<code>&lt;Value name = "scen"&gt;../input/addons/malaysia/elec_gen_link.xml&lt;/Value&gt;</code></li>
</ol>
</p>
</p>
<p></span></p>
</div>
<p><br></p>
<!-------------------------->
<!-------------------------->
<!-------------------------->
</div>
</div>
<div id="diagnostics" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Diagnostics</h1>
<!-------------------------->
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<p>This section describes how to explore and compare the final output
data using GCAM-specific post-processing tools.</p>
<!-------------------------->
<!-------------------------->
<div id="extract-gcam-data" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Extract GCAM
Data</h2>
<!-------------------------->
<!-------------------------->
<hr />
<p><code>gcamextractor</code> is an R package used to extract and
process GCAM data and manipulate into standardized tables.
<code>gcamextractor</code> converts GCAM outputs into commonly used
units as well as aggregates across different classes and sectors for
easy use in plots, maps and tables. For more information, please
reference the documentation page found <a
href="https://jgcri.github.io/gcamextractor/index.html">here</a>.</p>
<p>The first step is to create a path to the GCAM database, found in the
output folder of your GCAM folder, and a list of desired parameters. The
<code>readgcam()</code> function also requires region names and a
specific output folder. Because reading in many parameters can take
several minutes, we will be using existing outputs, found in your
working directory’s “gcamextractor” folder, generated by the code
below.</p>
<pre class="r"><code>sample_path &lt;- &quot;./output/database&quot;

sample_params &lt;- &quot;summary&quot;

regions &lt;- c(&quot;Malaysia&quot;, &quot;KualaLumpur&quot;, &quot;Rest of Malaysia&quot;)

data &lt;- gcamextractor::readgcam(gcamdatabase = sample_path,
                                paramsSelect = sample_params,
                                regionsSelect = regions,
                                regionsAggregate = list(regions),
                                regionsAggregateNames = &quot;All of Malaysia&quot;,
                                folder = &quot;../data/malaysia/gcamextractor&quot;)</code></pre>
<p>Until the scenario modeling process is complete, use the processed
csv files found in the data/malaysia/gcamextractor/ folder.</p>
<pre class="r"><code>ref &lt;- read.csv(&quot;../data/malaysia/gcamextractor/reference/gcamDataTable_aggClass1.csv&quot;) 
high &lt;- read.csv(&quot;../data/malaysia/gcamextractor/high/gcamDataTable_aggClass1.csv&quot;)
low &lt;- read.csv(&quot;../data/malaysia/gcamextractor/low/gcamDataTable_aggClass1.csv&quot;)
city &lt;- read.csv(&quot;../data/malaysia/gcamextractor/city/gcamDataTable_aggClass1.csv&quot;)

malaysia &lt;- bind_rows(ref, high, low, city) %&gt;%
  filter(region != (&quot;Rest of Malaysia&quot;),
         x &gt; 2000, x &lt; 2050)

# Define reference scenario
REF_SCENARIO &lt;- unique(ref$scenario)</code></pre>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div id="plot-figures" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Plot Figures</h2>
<!-------------------------->
<!-------------------------->
<hr />
<p><code>rchart</code> is a comprehensive charting package to plot and
compare data across scenarios, regions, sectors and time periods in
GCAM. The diagnostic figures below were created using
<code>gcamextractor</code> and <code>rchart</code> and include the
following parameters:</p>
<ul>
<li>Socioeconomics: population, GDP, GDP per capita</li>
<li>CO<sub>2</sub> emissions by sector</li>
<li>GHG emissions by sector and gas</li>
<li>Primary energy by fuel</li>
<li>Final energy by fuel</li>
<li>Final energy by sector</li>
<li>Electricity generation by fuel</li>
<li>Electricity generation by sector</li>
<li>Building energy by subsector</li>
<li>Transportation by mode</li>
<li>Transportation by fuel</li>
<li>Industry energy by fuel</li>
</ul>
<p>To enlarge a figure, please click directly on the image. Click on the
image again to close out.</p>
<p><br></p>
<!-------------------------->
<div id="summary-figures" class="section level3 tabset" number="5.2.1">
<h3 class="tabset"><span class="header-section-number">5.2.1</span>
Summary Figures</h3>
<!-------------------------->
<hr />
<!-------------------------->
<div id="socioeconomic-summary" class="section level4 tabset"
number="5.2.1.1">
<h4 class="tabset"><span class="header-section-number">5.2.1.1</span>
Socioeconomic Summary</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur" class="section level5"
number="5.2.1.1.1">
<h5><span class="header-section-number">5.2.1.1.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>socioeconomic_parameters &lt;- c(&quot;pop&quot;, &quot;gdp&quot;, &quot;gdpPerCapita&quot;)
  
socioeconomic &lt;- malaysia %&gt;%
  filter(param %in% socioeconomic_parameters,
         region != &quot;All of Malaysia&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units) %&gt;% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19)

socioeconomic$chart_region_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-socio-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia" class="section level5" number="5.2.1.1.2">
<h5><span class="header-section-number">5.2.1.1.2</span> Malaysia</h5>
<pre class="r"><code>socioeconomic_my &lt;- malaysia %&gt;%
  filter(param %in% socioeconomic_parameters,
         region == &quot;Malaysia&quot;) %&gt;%
  mutate(param = units,
         scenario = REF_SCENARIO) %&gt;% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19)

socioeconomic_my$chart_param</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-socio-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur" class="section level5" number="5.2.1.1.3">
<h5><span class="header-section-number">5.2.1.1.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>socioeconomic_kl &lt;- malaysia %&gt;%
  filter(param %in% socioeconomic_parameters,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units,
         scenario = REF_SCENARIO) %&gt;% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19)

socioeconomic_kl$chart_param</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-socio-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="emissions-by-sector-and-gas" class="section level4 tabset"
number="5.2.1.2">
<h4 class="tabset"><span class="header-section-number">5.2.1.2</span>
Emissions by Sector and Gas</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-1" class="section level5"
number="5.2.1.2.1">
<h5><span class="header-section-number">5.2.1.2.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>co2 &lt;- malaysia %&gt;% filter(param == &quot;emissCO2BySectorNoBio&quot;,
                           region != &quot;Malaysia&quot;) %&gt;%
  mutate(value = value * 3.67,
         units = &quot;CO2 Emissions (MTCO2eq)&quot;)

ghg &lt;- malaysia %&gt;% filter(param == &quot;emissGHGBySectorNoBioGWPAR5&quot;,
                           region != &quot;Malaysia&quot;)

malaysia_emissions &lt;- bind_rows(co2, ghg)</code></pre>
<pre class="r"><code>emissions &lt;- malaysia_emissions %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 10)

c &lt;- paste0(&quot;chart_class_&quot;, REF_SCENARIO)
emissions[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-plot-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>co2_gas &lt;- co2 %&gt;%
  mutate(class = &quot;CO2&quot;,
         param = &quot;emissGHGByGasNoBioGWPAR5&quot;)

ghg_gas &lt;- malaysia %&gt;% 
  filter(param == &quot;emissGHGByGasNoBioGWPAR5&quot;,
         class != &quot;CO2&quot;,
         region != &quot;Malaysia&quot;)

malaysia_emissions_gas &lt;- bind_rows(co2_gas, ghg_gas)</code></pre>
<pre class="r"><code>gas &lt;- malaysia_emissions_gas %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 10)

gas[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-gas-plot-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-1" class="section level5" number="5.2.1.2.2">
<h5><span class="header-section-number">5.2.1.2.2</span> Malaysia</h5>
<pre class="r"><code>co2_my &lt;- malaysia %&gt;% 
  filter(param == &quot;emissCO2BySectorNoBio&quot;, 
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(value = value * 3.67,
         units = &quot;CO2 Emissions (MTCO2eq)&quot;,
         param = &quot;CO2 Emissions&quot;)

ghg_my &lt;- malaysia %&gt;% 
  filter(param == &quot;emissGHGBySectorNoBioGWPAR5&quot;, 
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = &quot;GHG Emissions by Sector&quot;)

my_emissions &lt;- bind_rows(co2_my, ghg_my) </code></pre>
<pre class="r"><code>emissions_my_plot &lt;- my_emissions %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

emissions_my_plot$chart_param</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-plot-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ghg_gas_my &lt;- malaysia %&gt;% 
  filter(param == &quot;emissGHGByGasNoBioGWPAR5&quot;,
         class != &quot;CO2&quot;,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = &quot;GHG Emissions by Gas&quot;)

my_emissions_gas &lt;- bind_rows(ghg_gas_my, my_emissions)</code></pre>
<pre class="r"><code>gas_my &lt;- my_emissions_gas %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                summary_line = T,
                size_text = 10)

gas_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-gas-scenario-plot-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>gas_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-gas-plot-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-1" class="section level5" number="5.2.1.2.3">
<h5><span class="header-section-number">5.2.1.2.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>co2_kl &lt;- malaysia %&gt;% filter(param == &quot;emissCO2BySectorNoBio&quot;,
                           region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(value = value * 3.67,
         units = &quot;CO2 Emissions (MTCO2eq)&quot;,
         param = &quot;CO2 Emissions&quot;)

ghg_kl &lt;- malaysia %&gt;% filter(param == &quot;emissGHGBySectorNoBioGWPAR5&quot;,
                           region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = &quot;GHG Emissions by Sector&quot;)

kl_emissions &lt;- bind_rows(co2_kl, ghg_kl) </code></pre>
<pre class="r"><code>emissions_kl_plot &lt;- kl_emissions %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 12)

emissions_kl_plot$chart_param</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-plot-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ghg_gas_kl &lt;- malaysia %&gt;% 
  filter(param == &quot;emissGHGByGasNoBioGWPAR5&quot;,
         class != &quot;CO2&quot;,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = &quot;GHG Emissions by Gas&quot;)

kl_emissions_gas &lt;- bind_rows(ghg_gas_kl, kl_emissions)</code></pre>
<pre class="r"><code>gas_kl &lt;- kl_emissions_gas %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                summary_line = T,
                size_text = 14)

gas_kl$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-emiss-gas-scenario-plot-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>gas_kl$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-gas-plot-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="primary-energy-by-fuel" class="section level4 tabset"
number="5.2.1.3">
<h4 class="tabset"><span class="header-section-number">5.2.1.3</span>
Primary Energy by Fuel</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-2" class="section level5"
number="5.2.1.3.1">
<h5><span class="header-section-number">5.2.1.3.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>p_energy &lt;- malaysia %&gt;% 
  filter(param == &quot;energyPrimaryByFuelEJ&quot;,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 12)

p_energy[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-primary-energy-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-2" class="section level5" number="5.2.1.3.2">
<h5><span class="header-section-number">5.2.1.3.2</span> Malaysia</h5>
<pre class="r"><code>p_energy_my &lt;- malaysia %&gt;% 
  filter(param == &quot;energyPrimaryByFuelEJ&quot;,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

p_energy_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-primary-energy-sce-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>p_energy_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-primary-energy-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-2" class="section level5" number="5.2.1.3.3">
<h5><span class="header-section-number">5.2.1.3.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>p_energy_kl &lt;- malaysia %&gt;% 
  filter(param == &quot;energyPrimaryByFuelEJ&quot;,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 28)

p_energy_kl$chart_param_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-primary-energy-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="final-energy-by-fuel-and-sector" class="section level4 tabset"
number="5.2.1.4">
<h4 class="tabset"><span class="header-section-number">5.2.1.4</span>
Final Energy by Fuel and Sector</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-3" class="section level5"
number="5.2.1.4.1">
<h5><span class="header-section-number">5.2.1.4.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>energy_parameters &lt;- c(&quot;energyFinalConsumBySecEJ&quot;, &quot;energyFinalByFuelEJ&quot;)

energy &lt;- malaysia %&gt;% 
  filter(param %in% energy_parameters,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 10)

energy[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-energy-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-3" class="section level5" number="5.2.1.4.2">
<h5><span class="header-section-number">5.2.1.4.2</span> Malaysia</h5>
<pre class="r"><code>energy_my &lt;- malaysia %&gt;% 
  filter(param %in% energy_parameters,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 12)

energy_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-energy-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>energy_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-energy-sce-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-3" class="section level5" number="5.2.1.4.3">
<h5><span class="header-section-number">5.2.1.4.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>energy_kl &lt;- malaysia %&gt;% 
  filter(param %in% energy_parameters,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 12)

energy_kl$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-energy-sce-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>energy_kl$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-energy-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="electricity-generation-by-fuel-and-sector"
class="section level4 tabset" number="5.2.1.5">
<h4 class="tabset"><span class="header-section-number">5.2.1.5</span>
Electricity Generation by Fuel and Sector</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-4" class="section level5"
number="5.2.1.5.1">
<h5><span class="header-section-number">5.2.1.5.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>electricity_parameters &lt;- c(&quot;elecConsumByDemandSectorTWh&quot;, &quot;elecByTechTWh&quot;)

electricity &lt;- malaysia %&gt;% 
  filter(param %in% electricity_parameters,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 10)

electricity[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-elec-gen-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-4" class="section level5" number="5.2.1.5.2">
<h5><span class="header-section-number">5.2.1.5.2</span> Malaysia</h5>
<pre class="r"><code>electricity_my &lt;- malaysia %&gt;% 
  filter(param %in% electricity_parameters,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 12)

electricity_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-elec-gen-sce-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>electricity_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-elec-gen-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-4" class="section level5" number="5.2.1.5.3">
<h5><span class="header-section-number">5.2.1.5.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>electricity_kl &lt;- malaysia %&gt;% 
  filter(param %in% electricity_parameters,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 12)

electricity_kl$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-elec-gen-sce-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>electricity_kl$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-elec-gen-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
</div>
<div id="sectoral-details" class="section level3 tabset" number="5.2.2">
<h3 class="tabset"><span class="header-section-number">5.2.2</span>
Sectoral Details</h3>
<!-------------------------->
<hr />
<div id="building-energy-by-subsector" class="section level4 tabset"
number="5.2.2.1">
<h4 class="tabset"><span class="header-section-number">5.2.2.1</span>
Building Energy by Subsector</h4>
<hr />
<div id="malaysia-vs-kuala-lumpur-5" class="section level5"
number="5.2.2.1.1">
<h5><span class="header-section-number">5.2.2.1.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>building_energy &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecBySectorBuildEJ&quot;,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 12)

building_energy[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-building-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-5" class="section level5" number="5.2.2.1.2">
<h5><span class="header-section-number">5.2.2.1.2</span> Malaysia</h5>
<pre class="r"><code>building_energy_my &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecBySectorBuildEJ&quot;,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

building_energy_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-building-sce-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>building_energy_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-building-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-5" class="section level5" number="5.2.2.1.3">
<h5><span class="header-section-number">5.2.2.1.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>building_energy_kl &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecBySectorBuildEJ&quot;,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

building_energy_kl$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-building-sce-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>building_energy_kl$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-building-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="transportation-by-mode" class="section level4 tabset"
number="5.2.2.2">
<h4 class="tabset"><span class="header-section-number">5.2.2.2</span>
Transportation by Mode</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-6" class="section level5"
number="5.2.2.2.1">
<h5><span class="header-section-number">5.2.2.2.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>transport_mode_params &lt;- c(&quot;transportFreightVMTByMode&quot;, &quot;transportPassengerVMTByMode&quot;)
                
transport_m &lt;- malaysia %&gt;% 
  filter(param %in% transport_mode_params,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 9)

transport_m[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-mode-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-6" class="section level5" number="5.2.2.2.2">
<h5><span class="header-section-number">5.2.2.2.2</span> Malaysia</h5>
<pre class="r"><code>transport_my_m &lt;- malaysia %&gt;% 
  filter(param %in% transport_mode_params,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 10)

transport_my_m$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-my-sce-mode-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>transport_my_m$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-my-mode-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-6" class="section level5" number="5.2.2.2.3">
<h5><span class="header-section-number">5.2.2.2.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>transport_kl_m &lt;- malaysia %&gt;% 
  filter(param %in% transport_mode_params,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 10)

transport_kl_m$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-kl-sce-mode-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>transport_kl_m$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-kl-mode-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="transportation-by-fuel" class="section level4 tabset"
number="5.2.2.3">
<h4 class="tabset"><span class="header-section-number">5.2.2.3</span>
Transportation by Fuel</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-7" class="section level5"
number="5.2.2.3.1">
<h5><span class="header-section-number">5.2.2.3.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>transport_fuel_params &lt;- c(&quot;transportFreightVMTByFuel&quot;, &quot;transportPassengerVMTByFuel&quot;)
                
transport_f &lt;- malaysia %&gt;% 
  filter(param %in% transport_fuel_params,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 10)

transport_f[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-fuel-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-7" class="section level5" number="5.2.2.3.2">
<h5><span class="header-section-number">5.2.2.3.2</span> Malaysia</h5>
<pre class="r"><code>transport_my_f &lt;- malaysia %&gt;% 
  filter(param %in% transport_fuel_params,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 10)

transport_my_f$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-my-sce-fuel-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>transport_my_f$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-my-fuel-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-7" class="section level5" number="5.2.2.3.3">
<h5><span class="header-section-number">5.2.2.3.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>transport_kl_f &lt;- malaysia %&gt;% 
  filter(param %in% transport_fuel_params,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 10)

transport_kl_f$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-kl-sce-fuel-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>transport_kl_f &lt;- malaysia %&gt;% 
  filter(param %in% transport_fuel_params,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO,
                size_text = 18)

transport_kl_f$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-transport-kl-fuel-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
</div>
</div>
<div id="industry-energy-by-subsector" class="section level4 tabset"
number="5.2.2.4">
<h4 class="tabset"><span class="header-section-number">5.2.2.4</span>
Industry Energy by Subsector</h4>
<!-------------------------->
<hr />
<div id="malaysia-vs-kuala-lumpur-8" class="section level5"
number="5.2.2.4.1">
<h5><span class="header-section-number">5.2.2.4.1</span> Malaysia vs
Kuala Lumpur</h5>
<pre class="r"><code>industry_energy &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecByFuelIndusEJ&quot;,
         region != &quot;Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                size_text = 12)


industry_energy[[c]]</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-industry-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="malaysia-8" class="section level5" number="5.2.2.4.2">
<h5><span class="header-section-number">5.2.2.4.2</span> Malaysia</h5>
<pre class="r"><code>industry_energy_my &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecByFuelIndusEJ&quot;,
         region == &quot;All of Malaysia&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

industry_energy_my$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-industry-sce-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>industry_energy_my$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-industry-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="kuala-lumpur-8" class="section level5" number="5.2.2.4.3">
<h5><span class="header-section-number">5.2.2.4.3</span> Kuala
Lumpur</h5>
<pre class="r"><code>industry_energy_kl &lt;- malaysia %&gt;% 
  filter(param == &quot;energyFinalSubsecByFuelIndusEJ&quot;,
         region == &quot;KualaLumpur&quot;) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F, 
                show = F,
                scenRef = REF_SCENARIO)

industry_energy_kl$chart_class</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-industry-sce-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>industry_energy_kl$chart_class_diff_absolute</code></pre>
<p><img src="modeling_malaysia_files/figure-html/rchart-industry-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
</div>
</div>
</div>
</div>
<div id="assumptions-and-validation" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Assumptions and
Validation</h1>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="images/divider.png">
</p>
<!-------------------------->
<div id="socioeconomic-assumptions" class="section level2 tabset"
number="6.1">
<h2 class="tabset"><span class="header-section-number">6.1</span>
Socioeconomic assumptions</h2>
<!-------------------------->
<hr />
<p>This section details the socioeconomic inputs used to define Malaysia
and its subregions, Kuala Lumpur and “Rest of Malaysia,” in GCAM. These
metrics include population, GDP, and GDP per capita. Historical and
projection data were used when available, otherwise data was calculated
using the assumptions described below.</p>
<table>
<tr>
<th>
Variable
</th>
<th style="width:50%">
Assumptions
</th>
<th style="width:40%">
Data Sources
</th>
</tr>
<tr>
<td>
Population
</td>
<td>
<span>- Malaysia population used the medium variant projection and
historical data from the UN</span><br/> <span>- KL census data gives a
value for 2010. All other values were extrapolated and calculated using
the growth rates for Malaysia in total</span><br/> <span>- “Rest of
Malaysia” values found by subtracting KL numbers from
Malaysia</span><br/>
</td>
<td>
<span>- Malaysia: <a href="https://population.un.org/wpp/">United
Nations</a></span><br/> <span>- Kuala Lumpur 2010: <a
href="http://data.un.org/Data.aspx?q=kuala+lumpur&amp;d=POP&amp;f=tableCode%3a240%3bareaCode%3a0%3bsexCode%3a0%3bvarCode3%3a028690%3bvarCode4%3a000002">United
Nations</a></span><br/>
</td>
</tr>
<tr>
<td rowspan="3">
GDP
</td>
<td>
<span>- Malaysia annual growth rates are applied to KL’s 2020 GDP value
to extrapolate historical and future values</span><br/> <span>- “Rest of
Malaysia” values found by subtracting KL numbers from Malaysia</span>
</td>
<td rowspan="2">
<span>- Malaysia, historical: <a
href="https://www.ers.usda.gov/data-products/international-macroeconomic-data-set/">USDA
ERS</a></span><br/> <span>- Malaysia, future: <a
href="https://tntcat.iiasa.ac.at/SspDb/dsd?Action=htmlpage&amp;page=welcome">SSP
database</a></span><br/> <span>- Kuala Lumpur 2020: <a
href="https://www.dosm.gov.my/v1/index.php?r=column/cthemeByCat&amp;cat=102&amp;bul_id=anVobldYUFZLNE5WVlRVRExkSWEyZz09&amp;menu_id=TE5CRUZCblh4ZTZMODZIbmk2aWRRQT09">Department
of Statistics Malaysia</a></span><br/>
</td>
</tr>
</table>
<p><br> <br></p>
<!-------------------------->
</div>
<div id="validation-of-gcam-outputs" class="section level2"
number="6.2">
<h2><span class="header-section-number">6.2</span> Validation of GCAM
outputs</h2>
<!-------------------------->
<hr />
<p>This section will compare local data in sources from Malaysia and
Kuala Lumpur to GCAM outputs.</p>
<p><br></p>
<div id="population-and-gdp" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Population and
GDP</h3>
<pre class="r"><code>local_pop &lt;- read.csv(&quot;../data/malaysia/local_data_population.csv&quot;)
local_gdp &lt;- read.csv(&quot;../data/malaysia/local_data_gdp.csv&quot;)

local_bau &lt;- bind_rows(local_gdp, local_pop)

gcam_bau &lt;- malaysia %&gt;%
  filter(param == c(&quot;pop&quot;, &quot;gdp&quot;),
         region != &quot;Rest of Malaysia&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units,
         scenario = &quot;GCAM Reference&quot;,
         year = x)

bau &lt;- bind_rows(local_bau, gcam_bau)

# Plot for Malaysia
bau %&gt;% 
  filter(region == &quot;Malaysia&quot;) %&gt;%
  ggplot(aes(x = year, y = value, color = scenario)) + 
  geom_line() +
  facet_wrap(~param, scales = &quot;free&quot;) +
  ggtitle(&quot;Malaysia&quot;) +
  theme_light()</code></pre>
<p><img src="modeling_malaysia_files/figure-html/local-socioeconomics-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code># Plot for KL
bau %&gt;% 
  filter(region == &quot;KualaLumpur&quot;) %&gt;%
  ggplot(aes(x = year, y = value, color = scenario)) + 
  geom_line() +
  facet_wrap(~param, scales = &quot;free&quot;) +
  ggtitle(&quot;Kuala Lumpur&quot;) +
  theme_light()</code></pre>
<p><img src="modeling_malaysia_files/figure-html/local-socioeconomics-2.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="co2-emissions-by-sector" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> CO2 emissions by
sector</h3>
<pre class="r"><code>malaysia_build_ind &lt;-  co2_my %&gt;%
  filter(scenario == REF_SCENARIO, 
         class %in% c(&quot;building&quot;, &quot;industry&quot;)) %&gt;%
  mutate(param = units,
         scenario = &quot;GCAM Reference&quot;,
         year = x)

malaysia_transport &lt;- co2_my %&gt;%
  filter(scenario == REF_SCENARIO,
         class %in% c(&quot;International Aviation&quot;, &quot;International Shipping&quot;, &quot;transport&quot;)) %&gt;%
  mutate(param = units,
         scenario = &quot;GCAM Reference&quot;,
         year = x,
         class = case_when(class %in% c(&quot;International Aviation&quot;, &quot;International Shipping&quot;) ~ &quot;transport&quot;,
                           T~class)) %&gt;%
  group_by(year) %&gt;%
  mutate(total = sum(value)) %&gt;%
  distinct(year, .keep_all = TRUE)
 
malaysia_co2 &lt;- bind_rows(malaysia_build_ind, malaysia_transport) 

malaysia_co2 %&gt;%
 ggplot(aes(x = year, y = value, fill = class)) + 
  geom_col() +
  labs(title = &quot;Malaysia, GCAM reference&quot;,
       y = &quot;MTCO2eq&quot;) +
  scale_fill_manual(breaks = c(&quot;building&quot;, &quot;industry&quot;, &quot;transport&quot;),
                    values = c(&quot;#facda4&quot;, &quot;#cef4d1&quot;, &quot;#d0f6f7&quot;)) +
  theme_light()</code></pre>
<p><img src="modeling_malaysia_files/figure-html/local-emissions-my-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>local_co2 &lt;- read.csv(&quot;../data/malaysia/local_data_emissions_by_sector.csv&quot;)

gcam_co2 &lt;- co2_kl %&gt;%
  filter(scenario == REF_SCENARIO, 
         class %in% c(&quot;building&quot;, &quot;industry&quot;)) %&gt;%
  mutate(param = units,
         scenario = &quot;GCAM Reference&quot;,
         year = x)

# Aggregate GCAM classes into broad categories
gcam_transport &lt;- co2_kl %&gt;%
  filter(scenario == REF_SCENARIO,
         class %in% c(&quot;International Aviation&quot;, &quot;International Shipping&quot;, &quot;transport&quot;)) %&gt;%
  mutate(param = units,
         scenario = &quot;GCAM Reference&quot;,
         year = x,
         class = case_when(class %in% c(&quot;International Aviation&quot;, &quot;International Shipping&quot;) ~ &quot;transport&quot;,
                           T~class)) %&gt;%
  group_by(year) %&gt;%
  mutate(total = sum(value)) %&gt;%
  distinct(year, .keep_all = TRUE)

bau_co2 &lt;- bind_rows(local_co2, gcam_co2, gcam_transport)

bau_co2 %&gt;% 
  ggplot(aes(x = year, y = value, fill = class)) + 
  geom_col() +
  facet_wrap(~scenario) +
  labs(title = &quot;Kuala Lumpur&quot;,
       y = &quot;MTCO2eq&quot;) +
  scale_fill_manual(breaks = c(&quot;building&quot;, &quot;industry&quot;, &quot;transport&quot;),
                    values = c(&quot;#facda4&quot;, &quot;#cef4d1&quot;, &quot;#d0f6f7&quot;)) +
  theme_light()</code></pre>
<p><img src="modeling_malaysia_files/figure-html/local-emissions-kl-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="energy-by-fuel-and-sector" class="section level3"
number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Energy by fuel and
sector</h3>
<pre class="r"><code>final_energy_ref_my &lt;- malaysia %&gt;% 
  filter(param %in% energy_parameters,
         region == &quot;All of Malaysia&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F,
                show = F)

final_energy_ref_my$chart_class</code></pre>
<div class="figure" style="text-align: center">
<img src="modeling_malaysia_files/figure-html/local-energy-my-1.png" alt="Final energy by fuel and sector in Malaysia." width="100%" />
<p class="caption">
Final energy by fuel and sector in Malaysia.
</p>
</div>
<p><br></p>
<pre class="r"><code>final_energy_ref_kl &lt;- malaysia %&gt;% 
  filter(param %in% energy_parameters,
         region == &quot;KualaLumpur&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F,
                show = F)

final_energy_ref_kl$chart_class</code></pre>
<div class="figure" style="text-align: center">
<img src="modeling_malaysia_files/figure-html/local-energy-kl-1.png" alt="Final energy by fuel and sector in Kuala Lumpur." width="100%" />
<p class="caption">
Final energy by fuel and sector in Kuala Lumpur.
</p>
</div>
<p><br></p>
</div>
<div id="electricity-by-fuel-and-sector" class="section level3"
number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Electricity by fuel
and sector</h3>
<pre class="r"><code>elec_ref_my &lt;- malaysia %&gt;% 
  filter(param %in% electricity_parameters,
         region == &quot;All of Malaysia&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F,
                show = F,
                size_text = 10)

elec_ref_my$chart_class</code></pre>
<div class="figure" style="text-align: center">
<img src="modeling_malaysia_files/figure-html/local-elec-my-1.png" alt="Electricity by fuel and sector in Malaysia." width="100%" />
<p class="caption">
Electricity by fuel and sector in Malaysia.
</p>
</div>
<p><br></p>
<pre class="r"><code>elec_ref_kl &lt;- malaysia %&gt;% 
  filter(param %in% electricity_parameters,
         region == &quot;KualaLumpur&quot;,
         scenario == REF_SCENARIO) %&gt;%
  mutate(param = units) %&gt;%
  rchart::chart(save = F,
                show = F)

elec_ref_kl$chart_class</code></pre>
<div class="figure" style="text-align: center">
<img src="modeling_malaysia_files/figure-html/local-elec-kl-1.png" alt="Electricity by sector in Kuala Lumpur." width="85%" />
<p class="caption">
Electricity by sector in Kuala Lumpur.
</p>
</div>
<p><br></p>
</div>
</div>
<div id="section" class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered"></h2>
<p><span class="navbar-fixed-bottom text-muted bg-info">WORK IN PROGRESS
- DO NOT CITE
<img src="images/logo_us_state_department_color.png" style="padding-left:20px; height:40px;">
<img src="images/logo_pnnl_white.png" style="padding-left:20px; height:40px;"></span></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
