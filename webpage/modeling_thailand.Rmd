---
pagetitle: Modeling - Thailand
output: 
  html_document:
    toc: true
    toc_float: true
    toc_collapsed: true
    toc_depth: 2
    number_sections: true
    theme: cosmo
    #inverse: true
---

```{r setup, echo = FALSE, message=FALSE, warning=FALSE}
source("thailand_data_functions.R")
source("thailand_aggregate_groups.R")
source("conversions.R")
knitr::opts_chunk$set(results = "hide", echo=FALSE, out.width = "75%", fig.align='center', message = F, warning = F, error = F, eval = T)
library(dplyr)
```


```{r child = 'header.rmd'}
```

<!-------------------------->
<!-------------------------->
# Download GCAM SE Asia
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

<br>

Please use the link below to download GCAM.

```{r key links table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://zenodo.org/record/7195805#.Y0hqCnbMJaQ")

data.frame(
  File = c("gcamv5p3_seasia")) %>% 
  dplyr::mutate(Location = cell_spec(rep("Link",length(dt_url)),"html",link=dt_url)) %>%
  kable("html", escape = FALSE) %>%
  kable_styling(bootstrap_options = c("bordered","striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```

<br>

You will need the following prerequisites in order to run GCAM. You will also need at least 8 GB of RAM.

```{r prereq-table, results = 'show', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE}

dt_url <- c("https://www.java.com/en/download/",
            "https://cran.r-project.org/",
            "https://www.rstudio.com/",
            "http://symbolclick.com/xmlmarker_1_1_setup.exe")

links <- c("Install Java 64",
           "Install R",
           "Install RStudio",
           "Install Windows XML Maker")

data.frame(
  Prerequisite = c("Java 64",
           "R",
           "RStudio",
           "Windows XML Maker")) %>%
  dplyr::mutate(Link = cell_spec(links,"html",link=dt_url)) %>%
  kable("html", escape = FALSE) %>%
  kable_styling(bootstrap_options = c("bordered", "striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")

```

<br>

<!-------------------------->
<!-------------------------->
# Guides
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

<br>

```{r presentation links table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/gcam_overview.pdf",
            "https://github.com/JGCRI/seasia/blob/main/modeling/gcam_walkthrough.pdf")

data.frame(
  File = c("gcam_overview.pdf",
           "gcam_walkthrough.pdf"),
  Description = c("GCAM overview presentation",
                  "GCAM walkthrough presentation")) %>%
  dplyr::mutate(Location = cell_spec(rep("Link",length(dt_url)),"html",link=dt_url)) %>%
  kable("html", escape = FALSE) %>%
  kable_styling(bootstrap_options = c("bordered","striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<br>

<!-------------------------->
<!-------------------------->
# Scenarios
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>


```{r scenarios links table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/configuration_files/configuration_seasia_cities_bau.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/configuration_files/configuration_seasia_cities_low_mea_low_rot.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/configuration-files/configuration_seasia_cities_high_mea_high_rot.xml")

data.frame(
  File = c("configuration_seasia_cities_bau.xml",
           "configuration_seasia_cities_thailand_low.xml",
           "configuration_seasia_cities_thailand_high.xml"),
  "Scenario Name" = c("Ref", "policies_high", "policies_low"),
  Description = c("Business as Usual Scenario",
                  "Low-ambition sectoral policies in both the MEA area and Rest of Thailand",
                  "High-ambition sectoral policies in both the MEA area and Rest of Thailand")) %>%
  dplyr::mutate(Location = cell_spec(rep("Link",length(dt_url)),"html",link=dt_url)) %>%
  kable("html", escape = FALSE) %>%
  kable_styling(bootstrap_options = c("bordered","striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```



<!-------------------------->
<!-------------------------->
# Sectoral Policies
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

The following table lists the policies included in the high and low ambition national policies scenarios. The subsequent sections explain what each of these policies represent and how to adjust them. Each of these policies is implemented using XML add-on file(s) which can be included in the `configuration_seasia_cities_thailand_policy.xml` file in order to include the policy in the GCAM scenario.

```{r policy links table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

# dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_national_electricity_generation_floor_pdp2018.xml",
#             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_buildings_shell_eff_015_018.xml",
#             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_transport_cost_ev_2050p_2060f.xml",
#             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_transport_freight_rail_0034_2040_lin.xml",
#             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_transport_freight_road_55_2040_lin.xml")

data.frame(
  Sector = c(rep("Power", 2), rep("Buildings", 3), rep("Transportation", 2),
             rep("Industry", 2)),
  Policy = c("RE subsidies", "Coal retirement", "Building envelope efficiency", 
             "AC efficiency", "Lighting efficiency", "EV cost parity",
             "Liquids phaseout", "Industrial energy efficiency",
             "Industrial hydrogen use"),
  Description = c("Modify the electricity generation mix by setting generation floors for wind and solar using a subsidy policy",
                  "Prevent new coal development starting in 2020 and phase out existing coal",
                  "Modify the average envelope efficiency of residential and commercial buildings by setting the shell-conductance parameter for each year",
                  "Modify the average energy efficiency of air conditioners in buildings",
                  "Phase out non-LED lighting technologies in buildings",
                  "Reduce costs of EVs and hybrid vehicles to reach cost parity with traditional liquids vehicles",
                  "Phase out combustion engine vehicles",
                  "Increase average energy efficiency across industrial processes",
                  "Increase the use of hydrogen in industrial processes"),
  "High Ambition" = c("Minimum wind and solar generation correspond with Thailand's LTS goals",
                      "Coal is phased out by 2050",
                      "Envelope efficiency increases at an annual rate of 4% (residential)/ 4.5% (commercial)",
                      "Average AC efficiency is 6 W/W by 2030 and 8 W/W by 2050",
                      "Non-LED lighting is phased out by 2030",
                      "EVs reach cost-parity with CEVs by 2030 (passenger)/ 2040 (freight)",
                      "CEVs are phased out by 2050",
                      "Industrial energy efficiency increases 1% annually",
                      "Hydrogen industrial technologies are phased in relatively quickly"),
  "Low Ambition" = c("Minimum wind and solar generation correspond with 75% of Thailand's LTS goals",
                     "Coal is phased out by 2065",
                     "Envelope efficiency increases at an annual rate of 2% (residential)/ 2.5% (commercial)",
                     "Average AC efficiency is 4.3 W/W by 2030 and 6 W/W by 2050",
                     "Non-LED lighting is phased out by 2050",
                     "EVs reach cost-parity with CEVs by 2050 (passenger)/ 2060 (freight)",
                     "CEVs are phased out by 2065",
                     "Industrial energy efficiency increases 0.5% annually",
                     "Hydrogen industrial technologies are phased in relatively more slowly")) %>% 
  kable("html", escape = FALSE) %>% 
  kable_styling(bootstrap_options = c("bordered","striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
  
```

For each of the above policies, we are modeling a low-ambition and high-ambition version. For details on the differences between these 

## RE Subsidies
***

```{r re subsidy files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_floors_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_floors_low.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_input_subsidies.xml")

data.frame(
  Scenario = c("High", "Low", "Both")) %>% 
  dplyr:: mutate("Files Used" = cell_spec(c("wind_solar_floors_high.xml",
                                            "wind_solar_floors_low.xml",
                                            "wind_solar_input_subsidies.xml"),
                                          "html", link=dt_url),
         Description = c("Sets floors for wind and solar generation corresponding with Thailand's updated LTS generation goals",
                         "Sets floors for wind and solar generation corresponding with 75% Thailand's updated LTS generation goals",
                         "Applies subsidies to relevant wind and solar technologies in order to meet the specified floors")) %>% 
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this example is to set a minimum value (floor) in GCAM for the amount of electricity generation from wind and solar technologies corresponding with the goals through 2065 presented in the LTS update meeting. 

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
One way to set a generation floor for each fuel type in GCAM is to use a subsidy policy. This effectively lowers the cost of the relevant electricity generation technologies until the floor is reached.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Background-------->
<!-------------------------->

```{r background policy-portfolio-standards RE, child = 'background_policy-portfolio-standards.rmd'}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory eg. `./gcam-core/input/addons`.
2. Download the desired constraint file (either [wind_solar_floors_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_floors_high.xml) or [wind_solar_floors_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_floors_low.xml)) as well as the subsidy link file [wind_solar_input_subsidies](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/wind_solar_input_subsidies.xml) to the folder.
4. To make custom adjustments, optionally change the following within each `policy-portfolio-standard` tag in the XML:
</p>

<ul style='margin-left:4em; text-align:left;'>
  <li>`constraint` for each year in which a floor is desired</li>
  <li>Set `min-price` to a large negative value for years in which an exact constraint, rather than a floor, is desired</li>
</ul>
<p style='margin-left:1em;'>
5. Within each `supplysector` tag in the XML, make sure that the corresponding `input-subsidy` is added within each relevant `period` for each `stub-technology` you wish to constrain. Remove each `stub-technology` that you do not wish to include in the constraint.
6. Save the xml and then point to it in your configuration file by adding the lines (replace `high` with `low` as needed): 
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/wind_solar_floors_high.xml</Value>`
`<Value name = "scen">../input/addons/wind_solar_input_subsidies.xml</Value>`

</p>
</p>

</span>
</div>

<br>

## Coal Phaseout
***

```{r coal phaseout files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/no_new_coal.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/coal_shutdown_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/coal_shutdown_low.xml")

data.frame(
  Scenario = c("Both", "High", "Low")) %>% 
  dplyr:: mutate("Files Used" = cell_spec(c("no_new_coal.xml",
                                            "coal_shutdown_high.xml",
                                            "coal_shutdown_low.xml"),
                                          "html", link=dt_url),
         Description = c("Prevents additional coal capacity from being built starting in 2020",
                         "Retires existing coal capacity quickly; all coal is retired by 2050",
                         "Retires existing coal capacity more slowly; all coal is retired by 2065")) %>% 
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this example is to phase out coal from Thailand's electricity generation capacity. The difference between the high and low scenarios is how quickly coal is phased out and the year in which the phase-out is completed. 

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
There are two steps to phase out coal generation. The first is to prevent any new coal capacity from being built; we do this by setting coal shareweights to 0 in all future years. The second step is to gradually retire all existing coal capacity; we do this by shortening coal technologies' lifetimes and by assigning a shutdown curve to each technology.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Background-------->
<!-------------------------->

<!--- TO DO: make background page for lifetime and s-curve-shutdown-decider --->

```{r background shareweights coal, child = 'background_shareweights.rmd'}
```

```{r background retirement coal, child = 'background_retirement.rmd'}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory eg. `./gcam-core/input/addons`.
2. Download the coal shareweight file [no_new_coal.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/no_new_coal.xml) as well as the desired coal retirement file (either [coal_shutdown_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/coal_shutdown_high.xml) or [coal_shutdown_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/coal_shutdown_low.xml)) to the folder.
4. To make custom adjustments to the coal retirement trajectory, optionally change the following within each `stub-technology` tag in the retirement XML:
</p>

<ul style='margin-left:4em; text-align:left;'>
  <li>Use `lifetime` to adjust the year in which the coal phase-out is complete; the phase-out will be complete `x` years after 2015, where `x` is the `lifetime`. </li>
  <li>Use the `steepness` and `half-life` within the `s-curve-shutdown-decider` to adjust the phaseout trajectory; a smaller `half-life` and larger `steepness` will result in a faster phase-out.</li>
</ul>
<p style='margin-left:1em;'>
5. Save the xmls and then point to them in your configuration file by adding the lines (replace `high` with `low` as needed): 
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/no_new_coal.xml</Value>`
`<Value name = "scen">../input/addons/coal_shutdown_high.xml</Value>`

</p>
</p>

</span>
</div>

<br>


## Building Envelope Efficiency
***

```{r shell files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/shell_eff_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/shell_eff_low.xml")

data.frame(
  Scenario = c("High", "Low")) %>% 
  dplyr:: mutate("Files Used" = cell_spec(c("shell_eff_high.xml",
                                            "shell_eff_low.xml"),
                                          "html", link=dt_url),
         Description = c("Decreases shell conductance from 3.75 in 2020 to 0.487 (residential)/ 0.375 (commercial) in 2070 at an annual rate of 4% (residential)/ 4.5% (commercial)",
                         "Decreases shell conductance from 3.75 in 2020 to 1.366 (residential)/ 1.057 (commercial) in 2070 at an annual rate of 2% (residential)/ 2.5% (commercial)")) %>% 
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")

```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this example is to represent increasing compliance with the envelope efficiency component of building energy codes. The difference between the low and high scenario versions of this policy is the rate of increase.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>
We can use GCAM's `shell-conductance` parameter to represent an increase in the average building envelope efficiency according to building energy codes.
<p style='margin-left:1em;'>

</p>



</span>
</div>

<br>


<!-------------------------->
<!--------Background-------->
<!-------------------------->

```{r background cooling demand, child = 'background_coolingDemand.rmd'}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired xml file (either [shell_eff_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/shell_eff_high.xml) or [shell_eff_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/shell_eff_low.xml)) to the folder.
4. To make custom adjustments: within each `gcam-consumer` tag in the XML, specify the desired `shell-conductance` values for each year.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/shell_eff_high.xml</Value>`
</p>

</span>
</div>

<br>

## AC Efficiency
***

```{r ac eff files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ac_eff_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ac_eff_low.xml")

data.frame(
  Scenario = c("High", "Low")) %>% 
  dplyr:: mutate("Files Used" = cell_spec(c("ac_eff_high.xml",
                                            "ac_eff_low.xml"),
                                          "html", link=dt_url),
         Description = c("Increases acerage efficiency of high-efficiency ACs from 3.1 W/W in 2020 to 6 W/W in 2030 and 8 W/W in 2050",
                         "Increases acerage efficiency of high-efficiency ACs from 3.1 W/W in 2020 to 4.3 W/W in 2030 and 6 W/W in 2050")) %>% 
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")

```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this example is to represent increasing use of the higher and highest efficiency ACs in buildings. The difference between the low and high scenario versions of this policy is the rate of increase of the average AC efficiency.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>
We can use GCAM's `efficiency` parameter corresponding with the relevant AC technologies to represent an increase in the average AC effiency.
<p style='margin-left:1em;'>

</p>



</span>
</div>

<br>


<!-------------------------->
<!--------Background-------->
<!-------------------------->

<!--TODO: make a background page for technology efficiency-->

```{r background efficiency ac}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired xml file (either [ac_eff_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ac_eff_high.xml) or [ac_eff_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ac_eff_low.xml)) to the folder.
4. To make custom adjustments: within each period, adjust the efficiency value.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/ac_eff_high.xml</Value>`
</p>

</span>
</div>

<br>

## Lighting Efficiency
***

```{r lighting files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/buildings_led_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/buildings_led_low.xml")

data.frame(
  Scenario = c("High", "Low")) %>% 
  dplyr:: mutate("Files Used" = cell_spec(c("buildings_led_high.xml",
                                            "buildings_led_low.xml"),
                                          "html", link=dt_url),
         Description = c("Gradually phases non-LED residential lighting technology out of the market by 2030",
                         "Gradually phases non-LED residential lighting technology out of the market by 2050")) %>% 
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")

```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this policy is to represent increasing use of LED lighting in residential buildings and the decreasing use of other, less energy efficient lighting technologies. The difference between the low and high scenario versions of this policy is the year in which 100% LED residential lighting is achieved.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>
We can gradually decrease the shareweights of all non-LED residential lighting technologies in order to phase them out of the market. The year in which the non-LED shareweights reach 0 corresponds with the year in which 100% LED residential lighting is achieved.
<p style='margin-left:1em;'>

</p>



</span>
</div>

<br>


<!-------------------------->
<!--------Background-------->
<!-------------------------->

```{r background shareweights lighting, child = 'background_shareweights.rmd'}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired xml file (either [buildings_led_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/buildings_led_high.xml) or [buildings_led_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/buildings_led_low.xml)) to the folder.
4. To adjust the year in which 100% LED lighting is achieved: within each non-LED `stub-technology` tag in the XML, change the `to-year` in the first `interpolation-rule` and the `from-year` in the second. Also change the `year` of the `period` tag in which the `share-weight` is 0.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/buildings_led_high.xml</Value>`
</p>

</span>
</div>

<br>

## EV Cost Parity
***

```{r EV cost parity files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ev_cost_parity_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ev_cost_parity_low.xml")

data.frame(
  Scenario = c(rep("High",1), rep("Low",1))) %>% 
  mutate("Files Used" = cell_spec( c("ev_cost_parity_high.xml",
                                     "ev_cost_parity_low.xml"),
                                   "html", link = dt_url)) %>% 
  mutate(Description = c("Reduces EV costs to reach cost parity with liquids vehicles by 2030 (passenger)/ 2040 (freight)",
                         "Reduces EV costs to reach cost parity with liquids vehicles by 2050 (passenger)/ 2060 (freight)")) %>%
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this policy is represent measures to make EVs more competitive with combustion engine vehicles (CEV). The difference between the low and high policies is the year in which EVs reach cost parity with CEVs.  

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
To represent EV promotion, we use an approach that decreases the cost of EVs relative to CEVs, until the two technologies reach cost parity in some future year. We can do this using GCAM's `input-cost` parameter, which represents the non-energy costs of a given technology.
</p>


</span>
</div>

<br>


<!--------------------------->
<!--------Background--------->
<!--------------------------->

```{r background transport input cost, child = 'background_transportCost.rmd'}
```


<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired cost parity xml file (either [ev_cost_parity_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ev_cost_parity_high.xml) or [ev_cost_parity_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ev_cost_parity_low.xml)) to the folder.
4. To make custom adjustments to the EV cost trajectory, set the desired `input-cost` for each year within each`stub-technology` tag in the cost parity xml file.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
</p>
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/ev_cost_parity_high.xml</Value>`
</p>
</p>

</span>
</div>

<br>

## CEV phase-out
***

```{r CEV phase-out files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ldv_liquids_phaseout_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ldv_liquids_phaseout_low.xml")

data.frame(
  Scenario = c(rep("High",1), rep("Low",1))) %>% 
  mutate("Files Used" = cell_spec( c("ldv_liquids_phaseout_high.xml",
                                     "ldv_liquids_phaseout_low.xml"),
                                   "html", link = dt_url)) %>% 
  mutate(Description = c("Phases liquids passenger vehicles out of the market by 2050",
                         "Phases liquids passenger vehicles out of the market by 2065")) %>%
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this policy is to phase out combustion engine vehicles (CEV) from the market. The difference between the low and high policies is the year in which CEVs are completely phased out of the market.  

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
To represent a CEV phase-out, we decrease their shareweights over time. The year in which the shareweights are 0 is the year in which CEVs are completely phased out of the market.
</p>


</span>
</div>

<br>


<!--------------------------->
<!--------Background--------->
<!--------------------------->

```{r background shareweights CEV, child = 'background_shareweights.rmd'}
```

<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired  CEV phase-out xml file (either [ldv_liquids_phaseout_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ldv_liquids_phaseout_high.xml) or [ldv_liquids_phaseout_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/ldv_liquids_phaseout_low.xml)) to the folder.
4. To adjust the year in which CEVs are completely phased out: within each `stub-technology` tag in the XML, change the `to-year` in the first `interpolation-rule` and the `from-year` in the second. Also change the `year` of the `period` tag in which the `share-weight` is 0.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
</p>
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/ldv_liquids_phaseout_high.xml</Value>`
</p>
</p>

</span>
</div>

<br>

<!-- ## Transportation Mode Shift - Share weights -->
<!-- *** -->

<!-- ```{r shareweight files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE} -->
<!-- library(kableExtra); library(dplyr) -->

<!-- dt_url <- c("https://github.com/JGCRI/seasia/blob/main/data/thailand/inputs/thailand_bau_subsector_shareweights.csv", -->
<!--             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_transport_freight_rail_0034_2040_lin.xml", -->
<!--             "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/thailand_policy_subnational_transport_freight_road_55_2040_lin.xml") -->

<!-- data.frame( -->
<!--   "Files Used" = c("subsector_shareweights_ref.csv", -->
<!--            "thailand_policy_subnational_transport_freight_rail_0034_2040_lin.xml", -->
<!--            "thailand_policy_subnational_transport_freight_road_55_2040_lin.xml"), -->
<!--   Description = c("Reference share weights from Model Interface", -->
<!--               "Linear interpolation from default 2015 value (0.001342) to 0.0034 in 2040 for freight rail", -->
<!--               "Linear interpolation from default 2015 value (1) to 0.55 in 2040 for freight road")) %>% -->
<!--   dplyr::mutate(Location = cell_spec(rep("Link",length(dt_url)),"html",link=dt_url)) %>% -->
<!--   kable("html", escape = FALSE, col.names = c("Files Used", "Description", "Link")) %>% -->
<!--   kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>% -->
<!--   row_spec(0, background = "#2A2A2A", color = "white") -->
<!-- ``` -->


<!-- <!-------------------------->
<!-- <!----------Goal------------> 
<!-- <!--------------------------> 

<!-- <div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'> -->
<!-- <span> -->
<!-- <h3 style='text-align:center; font-size:24px'> -->
<!-- <b>Goal</b> -->
<!-- </h3> -->

<!-- <p style='margin-left:1em;'> -->
<!-- The goal of this example is represent Thailand's plans to increase freight rail and ship infrastructure, thereby increasing the share of rail and ship in total freight transportation and decreasing the share of road. -->

<!-- </p> -->
<!-- </span> -->
<!-- </div> -->

<!-- <br> -->


<!-- <!--------------------------> 
<!-- <!--------Approach----------> 
<!-- <!--------------------------> 

<!-- <div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'> -->
<!-- <span> -->

<!-- <h3 style='text-align:center; font-size:24px'> -->
<!-- <b>Approach</b></h3> -->

<!-- <p style='margin-left:1em;'> -->
<!-- Since infrastructure development is a non-cost impact on rail transport, we can use share weights to represent these impacts. Share weights are calibration parameters and not directly related to any "real-world" value, so it is usually necessary to test a range of share weight modifications to obtain the desired effect. The [subsector_shareweights_ref.csv]("https://github.com/JGCRI/seasia/blob/main/data/thailand/inputs/thailand_bau_subsector_shareweights.csv") file contains the share weights for each transportation mode; the freight rail share weight is 0.001342 for all future periods and the freight road share weight is 1. For this example, we tested a range of share weights and determined that the following modifications had the desired effect:  -->
<!-- </p> -->
<!-- <ul style='margin-left:4em; text-align:left;'> -->
<!--   <li>Freight rail share weight: linearly increase from default 2015 value (0.001342) to 0.0034 in 2040 and remain at 0.0034 for the rest of the modeling period</li> -->
<!--   <li>Freight road share weight: linearly decrease from default 2015 value (1) to 0.55 in 2040 and remain at 0.55 for the rest of the modeling period</li> -->
<!-- </ul> -->

<!-- </span> -->
<!-- </div> -->

<!-- <br> -->


<!-- <!--------------------------> 
<!-- <!--------Background----------> 
<!-- <!--------------------------> 

<!-- ```{r child = 'background_shareweights.rmd'} -->
<!-- ``` -->


<!-- <!--------------------------> 
<!-- <!---GCAM Implementation----> 
<!-- <!--------------------------> 

<!-- <div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'> -->
<!-- <span> -->
<!-- <h3 style='text-align:center; font-size:24px'> -->
<!-- <b>GCAM Implementation</b> -->
<!-- </h3> -->

<!-- <p style='margin-left:1em;'> -->
<!-- 1. Create a folder in the input directory: `./gcam-core/input/addons`. -->
<!-- 2. Download the example xml files [freight_rail_0034_2040_lin.xml](https://github.com/JGCRI/gcam_training/blob/main/examples/pass_rail_shrwt_lin_2050_fixed_2100.xml) and [freight_road_55_2040_lin.xml](https://github.com/JGCRI/gcam_training/blob/main/examples/freight_road_55_2040_lin.xml) to the folder. -->
<!-- 4. Adjust the following in the appropriate `tranSubsector` tag in the XML as desired: -->
<!-- </p> -->

<!-- <ul style='margin-left:4em; text-align:left;'> -->
<!--   <li>The `share-weight` for year 2040</li> -->
<!--   <li>The interpolation rule from 2015 to 2040 (linear)</li> -->
<!--   <li>The interpolation rule from 2040 to 2100 (fixed)</li> -->
<!-- </ul> -->

<!-- <p style='margin-bottom:1em; margin-left:1em; text-align:center;'>  -->
<!-- <b>Example xml structure</b>  -->
<!-- <br> -->
<!-- <img src="images/adjust_transport_mix_shareweight_eg_xml_structure.png"> -->
<!-- <i>Note: The first interpolation rule must include delete="1" in order to override all of the previous (default) interpolation rules.</i> -->
<!-- </p> -->

<!-- <p style='margin-left:1em;'> -->
<!-- 7. Save the xml and then point to it in your configuration file by adding the lines:  -->
<!-- <p style='font-size:0.8em'> -->
<!-- `<Value name = "scen">../input/addons/thailand/thailand_policy_subnational_transport_freight_rail_0034_2040_lin.xml</Value>` -->
<!-- `<Value name = "scen">../input/addons/thailand/thailand_policy_subnational_transport_freight_road_55_2040_lin.xml</Value>` -->
<!-- </p> -->
<!-- </p> -->

<!-- </span> -->
<!-- </div> -->

<!-- <br> -->

## Industry Energy Efficiency
***

```{r industry aeei files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_aeei_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_aeei_low.xml")

data.frame(
  Scenario = c(rep("High",1), rep("Low",1))) %>% 
  mutate("Files Used" = cell_spec( c("industry_aeei_high.xml",
                                     "industry_aeei_low.xml"),
                                   "html", link = dt_url)) %>% 
  mutate(Description = c("Increases overall efficiency of industrial processes by 1% annually through 2070",
                         "Increases overall efficiency of industrial processes by 0.5% annually through 2070")) %>%
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this policy is to represent measures to increase average efficiency of industrial processes. The difference between the low and high scenarios is the rate at which average industrial energy intensity decreases annually.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
To represent a gradual increase in industrial efficiency, we can use GCAM's `aeei` parameter, which controls the autonomous energy efficiency improvement (AEEI) of industrial processes.
</p>


</span>
</div>

<br>


<!--------------------------->
<!--------Background--------->
<!--------------------------->

<!-- TO DO: make background page for aeei -->

```{r background aeei industry}
```

<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired industrial aeei xml file (either [industry_aeei_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_aeei_high.xml) or [industry_aeei_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_aeei_low.xml)) to the folder.
4. To adjust the rate of industrial energy efficiency increase, change the value of the `aeei` tag for each desired year.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
</p>
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/industry_aeei_high.xml</Value>`
</p>
</p>

</span>
</div>

<br>

## Industry Hydrogen
***

```{r industry h2 files table, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra); library(dplyr)

dt_url <- c("https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_h2_high.xml",
            "https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_h2_low.xml")

data.frame(
  Scenario = c(rep("High",1), rep("Low",1))) %>% 
  mutate("Files Used" = cell_spec( c("industry_h2_high.xml",
                                     "industry_h2_low.xml"),
                                   "html", link = dt_url)) %>% 
  mutate(Description = c("Phases hydrogen industrial technologies into the market relatively quickly",
                         "Phases hydrogen industrial technologies into the market relatively more slowly")) %>%
  kable("html", escape = FALSE, col.names = c("Scenario", "Files Used", "Description")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  row_spec(0, background = "#2A2A2A", color = "white")
```


<!-------------------------->
<!----------Goal------------>
<!-------------------------->

<div class="warning" style='background-color:#E1F4F5; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>Goal</b>
</h3>

<p style='margin-left:1em;'>
The goal of this policy is to represent a phase-in of industrial technologies that use hydrogen as a fuel source. The difference between the high and low scenarios is how quickly these technologies are phased into the market.

</p>
</span>
</div>

<br>


<!-------------------------->
<!--------Approach---------->
<!-------------------------->

<div class="warning" style='background-color:#fffae0; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>

<h3 style='text-align:center; font-size:24px'>
<b>Approach</b></h3>

<p style='margin-left:1em;'>
To represent a phase-in of hydrogen technologies, we can gradually increase their shareweights.
</p>


</span>
</div>

<br>


<!--------------------------->
<!--------Background--------->
<!--------------------------->

```{r backgroud shareweights industry h2, child = 'background_shareweights.rmd'}
```

<!-------------------------->
<!---GCAM Implementation---->
<!-------------------------->

<div class="warning" style='background-color:#F5E5E1; border-left: solid #1f1f1f 4px; border-radius: 4px; padding:0.7em;'>
<span>
<h3 style='text-align:center; font-size:24px'>
<b>GCAM Implementation</b>
</h3>

<p style='margin-left:1em;'>
1. Create a folder in the input directory: `./gcam-core/input/addons`.
2. Download the desired industrial hydrogen technology shareweight xml file (either [industry_h2_high.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_h2_high.xml) or [industry_h2_low.xml](https://github.com/JGCRI/seasia/blob/main/modeling/thailand/sectoral_policies/industry_h2_low.xml)) to the folder.
4. To adjust how quicly hydrogen technologies are phased into the market: within each `subsector` tag in the XML, change the `to-year` in the  `interpolation-rule`. Also change the `year` of the `period` tag in which the `share-weight` is 1. Be sure that these years match. An earlier year corresponds to a faster phase-in.
5. Save the xml and then point to it in your configuration file by adding the line (replace `high` with `low` as needed): 
</p>
<p style='font-size:0.8em'>
`<Value name = "scen">../input/addons/thailand/industry_h2_high.xml</Value>`
</p>
</p>

</span>
</div>

<br>

<!-------------------------->
<!-------------------------->
# Emissions Constraints
<!-------------------------->
<!-------------------------->


<!-------------------------->
<!-------------------------->
# Diagnostics
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

This section describes how to explore and compare the final output data using GCAM's post-processing tools.


## Extract GCAM Data
***

`gcamextractor` is an R package used to extract and process GCAM data and manipulate into standardized tables. `gcamextractor` converts GCAM outputs into commonly used units as well as aggregates across different classes and sectors for easy use in plots, maps and tables. For more information, please reference the documentation page found [here](https://jgcri.github.io/gcamextractor/index.html).

The first step is to create a path to the GCAM database, found in the output folder of your GCAM folder, and a list of desired parameters. The `readgcam()` function also requires region names and a specific output folder. Because reading in many parameters can take several minutes, we will be using existing outputs, found in your working directory's "gcamextractor" folder, generated by the code below.

```{r gcamextractor-setup, echo = TRUE, eval = FALSE}
sample_path <- "./output/database"

sample_params <- "summary"

regions <- c("Bangkok", "SamutPrakan", "Nonthaburi", "Rest of Thailand", "Thailand")

aggregate_regions <- list(c("Bangkok", "SamutPrakan", "Nonthaburi"), regions)

aggregate_region_names <- c("MEA area", "All of Thailand")

data <- gcamextractor::readgcam(gcamdatabase = sample_path,
                                paramsSelect = sample_params,
                                regionsSelect = regions,
                                regionsAggregate = aggregate_regions,
                                regionsAggregateNames = aggregate_region_names,
                                folder = "../data/thailand/gcamextractor")

```

```{r gcamextractor, echo = TRUE}
ref <- read.csv("../data/Thailand/gcamextractor/Ref/gcamDataTable_aggClass1.csv")
high <- read.csv("../data/Thailand/gcamextractor/High/gcamDataTable_aggClass1.csv")
low <- read.csv("../data/Thailand/gcamextractor/Low/gcamDataTable_aggClass1.csv")

thailand <- dplyr::bind_rows(ref, high, low) %>% 
  filter(x >= 2020, x <= 2065,
         !grepl("International", class))

```

```{r fix param names, eval = TRUE, echo = FALSE, warning=FALSE, error=FALSE, message=FALSE}
# need to fix emisisons units names in gcamextractor so they aren't the same across params
# doing it here for now until it's fixed in gcamextractor
thailand <- thailand %>% 
  mutate(units = case_when(param == "emissGHGBySectorGWPAR5" ~ "GHG Emissions by Sector (MTCO2eq)",
                           param == "emissGHGByGasGWPAR5" ~ "GHG Emissions by Gas (MTCO2eq)",
                           param == "emissGHGBySectorNoBioGWPAR5" ~ "GHG Emissions by Sector (MTCO2eq)",
                           param == "emissGHGByGasNoBioGWPAR5" ~ "GHG Emissions by Gas (MTCO2eq)",
                           param == "transportFreightVMTByFuel" ~ "Freight (million ton-km) by Fuel",
                           param == "transportPassengerVMTByFuel" ~ "Passenger (million pass-km) by Fuel",
                           param == "transportFreightVMTByTech" ~ "Freight (million ton-km) by Tech",
                           param == "transportPassengerVMTByTech" ~ "Passenger (million pass-km) by Tech",
                           T ~ units))

```

<br>

## Plot Figures {.tabset}
***

`rchart` is a comprehensive charting package to plot and compare data across scenarios, regions, sectors and time periods in GCAM. The following tabs show initial diagnostics of the sectoral policy scenarios for all of Thailand as well as the MEA area.

<br>

### Thailand {.tabset}


#### Summary figures {.tabset .tabset-pills}

##### Socioeconomic summary

```{r socio-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 16, fig.height = 6, out.width = "100%", fig.cap="GDP, per capita GDP, and population in Thailand from 2020 to 2065. Only the BAU scenario is shown since socioeconomic assumptions are consistent between scenarios."}
socioeconomic_parameters <- c("pop", "gdp", "gdpPerCapita")

socioeconomic <- thailand %>%
  filter(param %in% socioeconomic_parameters,
         region %in% c("MEA area", "Thailand"),
         scenario == "Ref") %>%
  mutate(param = units) %>% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                chart_type = "chart_param_absolute")

socioeconomic$chart_param_Thailand
```

<br> 
<br>


##### Emissions by sector and gas
***

``` {r emiss-line-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 12, fig.height = 6, out.width = "100%", fig.cap="Total national CO2 emissions (left) and GHG emissions (right) in the reference scenario and the low and high policies scenarios"}

emissions_line_params <- c("emissCO2BySector", "emissGHGBySectorGWPAR5")

emissions_line <- thailand %>% filter(param %in% emissions_line_params,
                           region %in% c("All of Thailand", "MEA area")) %>%
  mutate(param = units) %>% 
  rchart::chart(chart_type = "param_absolute",
                save = F, 
                show = F,
                size_text = 19)

emissions_line$`chart_param_All of Thailand`

```


``` {r emiss-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 20, fig.height = 18, out.width = "100%", fig.cap="National CO2 emissions by sector, GHG emissions by gas, and GHG emissions by sector in the reference scenario and the low and high policies scenarios"}

emissions_params <- c("emissCO2BySectorNoBio", "emissGHGBySectorNoBioGWPAR5", "emissGHGByGasNoBioGWPAR5")

emissions_bar <- thailand %>% filter(param %in% emissions_params,
                                     region %in% c("All of Thailand", "MEA area")) %>%
  mutate(param = units) %>% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref",
                summary_line = T,
                chart_type = "class_absolute")

emissions_bar$`chart_class_All of Thailand`

```

One of rchart's chart types is `class_diff_absolute`, which shows the reference (BAU) scenario on the left and the difference between each policy scenario and the reference scenario on the right. For example, the `policies_high_diffAbs` panels in the chart below show the difference in CO2 and GHG emissions by sector and gas in the `policies_high scenario` compared to the `Ref` scenario.

``` {r emiss-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 17, out.width = "100%", fig.cap="Difference in national CO2 and GHG emissions by sector and gas between the reference scenario (left) and the low and high policy scenarios (right)"}

emissions_diff <- thailand %>% filter(param %in% emissions_params,
                                      region %in% c("All of Thailand", "MEA area")) %>%
  mutate(param = units) %>% 
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref",
                summary_line = T,
                chart_type = "class_diff_absolute")

emissions_diff$`chart_class_diff_absolute_All of Thailand`

```

<br>


##### Final Energy by Fuel and Sector
***

```{r energy-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 20, fig.height = 12, out.width = "100%", fig.cap="National final energy consumption by fuel and sector in the reference scenario and the low and high policies scenarios"}
energy_parameters <- c("energyFinalConsumBySecEJ", "energyFinalByFuelEJ")

energy <- thailand %>% 
  filter(param %in% energy_parameters,
         region %in% c("All of Thailand", "MEA area")) %>%
  mutate(param = units) %>%
  rchart::chart(save = F, 
                show = F,
                size_text = 20,
                scenRef = "Ref")

energy$`chart_class_All of Thailand`
```

<br>

``` {r energy-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 12, out.width = "100%", fig.cap="Difference in national final energy consumption by fuel and sector between the reference scenario (left) and the low and high policy scenarios (right)"}


energy$`chart_class_diff_absolute_All of Thailand`

```

##### Electricity Generation and Consumption
***

```{r elec-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 20, fig.height = 18, out.width = "100%", fig.cap="National electricity generation by fuel, electricity consumption by sector, and power sector GHG emissions by gas and fuel in the reference scenario and the low and high policies scenarios"}
elec_parameters <- c("elecByTechTWh", "elecConsumByDemandSectorTWh",
                     "emissGHGBySectorPowerGWPAR5")

electricity <- thailand %>% 
  filter(param %in% elec_parameters,
         region %in% c("All of Thailand", "MEA area"),
         !grepl("backup|biomass", class)) %>%
  mutate(param = units) %>%
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref")

electricity$`chart_class_All of Thailand`

```

``` {r elec-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 12, out.width = "100%", fig.cap = "Difference in national electricity generation by fuel, electricity consumption by sector, and power sector GHG emissions by gas and fuel between the reference scenario (left) and the low and high policy scenarios (right)"}

electricity$`chart_class_diff_absolute_All of Thailand`

```

<br>

#### Sectoral details {.tabset .tabset-pills}

##### Buildings

```{r building-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 21, fig.height = 18, out.width = "100%", fig.cap="National buildings sector GHG emissions by service, final energy by fuel, and final energy by service in the reference scenario and the low and high policies scenarios"}
buildings_params <- c("energyFinalSubsecByFuelBuildEJ", 
                      "energyFinalSubsecBySectorBuildEJ",
                      "emissGHGBySectorBuildingsGWPAR5")

buildings <- thailand %>% 
  filter(param %in% buildings_params,
         region %in% c("All of Thailand", "MEA area"),
         class != "global solar resource") %>%
  mutate(param = units) %>%
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref")

buildings$`chart_class_All of Thailand`
```

We have found that the low-ambition buildings policies (increased AC efficiency, phase-out of non-LED lighting, and increased building envelope efficiency) result in an increase in energy consumption from lighting and cooking until 2050. We will need to investigate the cause of this. Additionally, we have found that the majority of GHG emissions in the buildings sector are from cooking, so since the buildings policies do not address cooking, building emissions do not change much in the policy scenarios. We should consider adding cooking-related policies to our scenarios.

```{r building-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 38, fig.height = 21, out.width = "100%", fig.cap="Difference in national buildings sector GHG emissions by service, final energy by fuel, and final energy by service between the reference scenario (left) and the low and high policy scenarios (right)"}

buildings$`chart_class_diff_absolute_All of Thailand`
```


##### Transportation
```{r transport-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 21, fig.height = 31, out.width = "100%", fig.cap="National transportation GHG emissions by mode and service output by mode and fuel in the reference scenario and the low and high policies scenarios"}
transport_params <- c("transportFreightVMTByFuel", "transportPassengerVMTByFuel",
                      "transportPassengerVMTByTech", "transportFreightVMTByTech",
                      "emissGHGBySectorTransportGWPAR5")

transport <- thailand %>% 
  filter(param %in% transport_params,
         region %in% c("All of Thailand", "MEA area"),
         !grepl("International", class)) %>%
  mutate(param = units) %>%
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref")

transport$`chart_class_All of Thailand`
```

```{r transport-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 34, fig.height = 30, out.width = "100%", fig.cap="Difference in national transportation GHG emissions by mode and service output by mode and fuel between the reference scenario (left) and the low and high policy scenarios (right)"}

transport$`chart_class_diff_absolute_All of Thailand`
```

##### Industry
```{r industry-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 20, fig.height = 12, out.width = "100%", fig.cap=" National industrial GHG emissions and final energy consumption by fuel in the reference scenario and the low and high policies scenarios"}
industry_params <- c("energyFinalSubsecByFuelIndusEJ", "emissGHGBySectorIndustryGWPAR5")

industry <- thailand %>% 
  filter(param %in% industry_params,
         region %in% c("All of Thailand", "MEA area"),
         !class %in% c("biomass", "industrial feedstocks", "industrial processes")) %>%
  mutate(param = units) %>%
  rchart::chart(save = F, 
                show = F,
                size_text = 19,
                scenRef = "Ref")

industry$`chart_class_All of Thailand`
```

```{r industry-diff-th, results = 'hide', eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 32, fig.height = 12, out.width = "100%", fig.cap = "Difference in national industrial GHG emissions and final energy consumption by fuel between the reference scenario (left) and the low and high policy scenarios (right)"}

industry$`chart_class_diff_absolute_All of Thailand`
```

<br>

### MEA Area {.tabset}

#### Summary figures {.tabset .tabset-pills}

##### Socioeconomic summary

```{r socio-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 16, fig.height = 6, out.width = "100%", fig.cap="GDP, per capita GDP, and population in the MEA area from 2020 to 2065. Only the BAU scenario is shown since socioeconomic assumptions are consistent between scenarios."}

socioeconomic_mea <- thailand %>%
  filter(param %in% socioeconomic_parameters,
         region %in% c("Bangkok", "SamutPrakan", "Nonthaburi"),
         scenario == "Ref") %>%
  mutate(param = units) %>% 
  rchart::chart(chart_type = "region_absolute",
                save = F, 
                show = F,
                size_text = 19)

socioeconomic_mea$chart_region_absolute
```

<br> 
<br>


##### Emissions by sector and gas
***

``` {r emiss-line-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 12, fig.height = 6, out.width = "100%", fig.cap="Total MEA area CO2 emissions (left) and GHG emissions (right) in the reference scenario and the low and high policies scenarios"}

emissions_line$`chart_param_MEA area`

```


``` {r emiss-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 20, fig.height = 18, out.width = "100%",  fig.cap="MEA area CO2 emissions by sector, GHG emissions by gas, and GHG emissions by sector in the reference scenario and the low and high policies scenarios"}

emissions_bar$`chart_class_MEA area`

```

``` {r emiss-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 18, out.width = "100%", fig.cap="Difference in MEA area CO2 and GHG emissions by sector and gas between the reference scenario (left) and the low and high policy scenarios (right)"}

emissions_diff$`chart_class_diff_absolute_MEA area`

```

<br>


##### Final Energy by Fuel and Sector
***

```{r energy-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 20, fig.height = 12, out.width = "100%", fig.cap="MEA area final energy consumption by fuel and sector in the reference scenario and the low and high policies scenarios"}

energy$`chart_class_MEA area`
```

``` {r energy-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 12, out.width = "100%", fig.cap="Difference in MEA area final energy consumption by fuel and sector between the reference scenario (left) and the low and high policy scenarios (right)"}


energy$`chart_class_diff_absolute_MEA area`

```

<br>

##### Electricity Consumption
***

```{r elec-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 20, fig.height = 6, out.width = "100%", fig.cap="MEA area electricity generation by fuel, electricity consumption by sector, and power sector GHG emissions by gas and fuel in the reference scenario and the low and high policies scenarios"}

electricity$`chart_class_MEA area`

```

``` {r elec-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE,fig.width = 32, fig.height = 6,out.width = "100%",fig.cap = "Difference in MEA area electricity generation by fuel, electricity consumption by sector, and power sector GHG emissions by gas and fuel between the reference scenario (left) and the low and high policy scenarios (right)"}


electricity$`chart_class_diff_absolute_MEA area`

```

<br>

#### Sectoral details {.tabset .tabset-pills}

##### Buildings
```{r building-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 21, fig.height = 12, out.width = "100%", fig.cap="MEA area buildings sector GHG emissions by service, final energy by fuel, and final energy by service in the reference scenario and the low and high policies scenarios"}

buildings$`chart_class_MEA area`
```

```{r building-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 38, fig.height = 14, out.width = "100%", fig.cap="Difference in MEA area buildings sector GHG emissions by service, final energy by fuel, and final energy by service between the reference scenario (left) and the low and high policy scenarios (right)"}

buildings$`chart_class_diff_absolute_MEA area`
```

##### Transportation
```{r transport-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 21, fig.height = 25, out.width = "100%", fig.cap="MEA area transportation GHG emissions by mode and service output by mode and fuel in the reference scenario and the low and high policies scenarios"}

transport$`chart_class_MEA area`
```

```{r transport-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 34, fig.height = 24, out.width = "100%", fig.cap="Difference in MEA area transportation GHG emissions by mode and service output by mode and fuel between the reference scenario (left) and the low and high policy scenarios (right)"}

transport$`chart_class_diff_absolute_MEA area`
```

##### Industry
```{r industry-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 15, fig.height = 5, out.width = "100%", fig.cap="MEA area industrial GHG emissions and final energy consumption by fuel in the reference scenario and the low and high policies scenarios"}

industry$`chart_class_MEA area`
```

```{r industry-diff-mea, results = 'hide', eval = TRUE, echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 32, fig.height = 6, out.width = "100%", fig.cap = "Difference in MEA area industrial GHG emissions and final energy consumption by fuel between the reference scenario (left) and the low and high policy scenarios (right)"}

industry$`chart_class_diff_absolute_MEA area`
```

<br>

<!-------------------------->
<!-------------------------->
# Assumptions and Validation
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>



<!-------------------------->
## Socioeconomic assumptions {.tabset}
<!-------------------------->

This section describes the socioeconomic (population and GDP) inputs used to define Thailand's subregions (Bangkok, Nonthaburi, Samut Prakan, and Rest of Thailand) in GCAM. Historical data were available from 1990 to 2020 for all regions, and  projections published by local agencies were available for some future periods. The table below lists all data sources and assumptions.

<table>

<tr>
<th>Variable</th>
<th>Region</th>
<th style="width:45%">Data Sources</th>
<th style="width:45%">Assumptions</th>
</tr>

<tr>
<td rowspan="2">Population</td>
<td>National</td>
<td>
<span>- Historical (1993-2021): [National Economic & Social Development Board (NESDB)](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.nesdc.go.th%2Fewt_dl_link.php%3Fnid%3D3507%26filename%3Dsocial&wdOrigin=BROWSELINK)</span><br/>
<span>- Projected (2022-2040): [NESDB](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.nesdc.go.th%2Fewt_dl_link.php%3Fnid%3D3507%26filename%3Dsocial&wdOrigin=BROWSELINK)</span><br/>
<span>- Projected (2041-2100): [United Nations (UN)](https://population.un.org/wpp/Download/Standard/Population/)</span>
</td>
<td> 2041-2100 projection is from UN's medium growth scenario. </td>
</tr>

<tr>
<td>Provincial</td>
<td>
<span>- Historical (1993-2021): [Department of Provincial Administration](https://stat.bora.dopa.go.th/new_stat/webPage/statByYear.php)</span><br/>
<span>- Projected (2022-2040): [NESDB](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.nesdc.go.th%2Fewt_dl_link.php%3Fnid%3D3507%26filename%3Dsocial&wdOrigin=BROWSELINK)</span>
</td>
<td>Post-2040 projections are based on shares of national population in 2040 (Bangkok: 8.1%; Nonthaburi: 2.5%; Samut Prakan: 2.6%).</td>
</tr>


<tr>
<td rowspan="2">GDP/GPP</td>
<td>National</td>
<td> 
<span>- Historical (1990-2020): [NESDB](https://www.nesdc.go.th/main.php?filename=ni_page)</span> <br/>
<span>- Historical (2020-2021):[Nikkei Asia article](https://asia.nikkei.com/Economy/Thai-economy-grew-1.6-in-2021-despite-COVID-19-headwind)</span><br/>
<span>- Projected (2021-2050): missing link (NESDB)</span><br/>
</td>
<td>Post-2050 national GDP projections follow assumption that GDP will be around 52,000 USD (2005) based on historical GDP per capita trends of developed nations.</td>
</tr>

<tr>
<td>Provincial</td>
<td>
Historical (1995-2020): [NESDB](https://www.nesdc.go.th/main.php?filename=gross_regional)
</td>
<td>GPP assumptions for 2021-2100 vary between provinces, with Bangkok's per capita GDP reaching around 70,000 USD (2005) by 2100, consistent with income ranges of some high income cities at present.</td>
</tr>

</table>

<br>
<br>

The figures below show the time series produced for each region's [population](https://github.com/JGCRI/seasia/data/thailand/inputs/thailand_socioecon_pop_thammasat.csv), [GDP](https://github.com/JGCRI/seasia/data/thailand/inputs/thailand_socioecon_gdp_usd2005_thammasat.csv), and [per capita GDP](https://github.com/JGCRI/seasia/data/thailand/inputs/thailand_socioecon_pcgdp_usd2005_thammasat_v2.csv) based on the data sources and assumptions in the table:

### Population


```{r pop input, fig.dim=c(8,4), fig.cap="**Historical and projected future population in Thailand and MEA area. Sources: [NESDB](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.nesdc.go.th%2Fewt_dl_link.php%3Fnid%3D3507%26filename%3Dsocial&wdOrigin=BROWSELINK) and [DOPA](https://stat.bora.dopa.go.th/new_stat/webPage/statByYear.php) (1990-2020), [NESDB](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.nesdc.go.th%2Fewt_dl_link.php%3Fnid%3D3507%26filename%3Dsocial&wdOrigin=BROWSELINK) (2021-2040) and [United Nations](https://population.un.org/wpp/Download/Standard/Population/) (Post-2040)**"}

pop_inputs <- read.csv("../data/thailand/inputs/thailand_socioecon_pop_thammasat.csv")
pop_inputs$region <- factor(pop_inputs$region, levels = c("Thailand", "Bangkok", "Samut Prakan", "Nonthaburi", "Rest of Thailand"),
                            labels = c("Thailand", "Bangkok", "Samut Prakan", "Nonthaburi", "Rest of Thailand"))

pop_all <- rchart::chart(
  dplyr::mutate(
    dplyr::filter(pop_inputs, region != "Rest of Thailand",
                  year >= 1990),
    value = value/1000000),
  chart_type = "region_absolute",
  save = F, aspect_ratio = 0.4
)


pop_all$chart_region_absolute +
    # ggplot2::annotate("rect", xmin=2021, xmax=2040, ymin=-Inf, ymax=Inf,
    #                    alpha = 0.2, color = NA) +
    ggplot2::facet_wrap(~region, nrow = 2, 
                        scales = "free_y") +
    ggplot2::ylab("Population (millions)") +
    ggplot2::theme(legend.position = "none",
                   plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))
```


### GDP

```{r gdp input, fig.dim=c(8,4), fig.cap="**Historical and projected future GDP in Thailand and GPP in the MEA provinces.**"}

tu_gdp <- read.csv("../data/thailand/inputs/thailand_socioecon_gdp_usd2005_thammasat.csv") %>% 
  filter(region != "Rest of Thailand") 

# plot gdp
gdp_all_baht <- rchart::chart(
  dplyr::mutate(
    dplyr::filter(tu_gdp, region != "Rest of Thailand",
                  year >= 1990),
    value = value/1000000000),
  chart_type = "region_absolute",
  save = F, aspect_ratio = 0.4
)

gdp_all_baht$chart_region_absolute +
    ggplot2::facet_wrap(~region, nrow = 2, 
                        scales = "free_y") +
    ggplot2::ylab("GDP (billions 2005 $USD)") +
    ggplot2::theme(legend.position = "none",
                   plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))
```

### Per Capita GDP

```{r pcgdp input, fig.dim=c(6,4), fig.cap="**Thailand per capita GDP from 1990 to 2100 in constant 2005 $USD**"}
pcgdp_usd2005 <- read.csv("../data/thailand/inputs/thailand_socioecon_pcgdp_usd2005_thammasat_v2.csv")
pcgdp_usd2005$region <- factor(pcgdp_usd2005$region, 
                            levels = c("Thailand", "Bangkok", "Samut Prakan",
                                       "Nonthaburi", "Rest of Thailand"))

# plot pcgdp
pcgdp_all_usd2005 <- rchart::chart(
  dplyr::mutate(
    dplyr::filter(pcgdp_usd2005, region != "Rest of Thailand"),
    value = value/1000),
  chart_type = "region_absolute",
  save = F, aspect_ratio = 0.4
)

pcgdp_all_usd2005$chart_region_absolute +
    ggplot2::ylab("Per Capita GDP (Thousands $USD)") 

```

<br>
<br>

<!-------------------------->
## Validation of GCAM outputs in historical periods {.tabset}
<!-------------------------->

### Thailand {.tabset}

#### Emissions

The following figures compare the GCAM output for Thailand's CO2 emissions (total and by sector) to data from EPPO in historical years. The "Ref" GCAM scenario includes emissions from international shipping and aviation, while the "Ref-domestic" scenario does not.

```{r national co2 emissions data prep}
# read in gcam data
gcam_co2_emiss_th <- ref %>% 
  filter(param == "emissCO2BySectorNoBio",
         region == "All of Thailand",
         x >= 1990, class != "LUC") %>% 
  select(x, units, region, scenario, value, class) %>% 
  mutate(region = "Thailand",
         class = case_when(class %in% c("International Aviation", "International Shipping") ~ "transport",
                           T~class))

# no trn_intl version
gcam_co2_emiss_th_noInt <- ref %>% 
  filter(param == "emissCO2BySectorNoBio",
         region == "All of Thailand",
         x >= 1990, class != "LUC",
         !class %in% c("International Aviation", "International Shipping")) %>% 
  select(x, units, region, scenario, value, class) %>% 
  mutate(region = "Thailand",
         scenario = "Ref- domestic")

# read in local data 
local_national_co2_emissions_sector <- dplyr::mutate(
  read.csv(
  "../data/thailand/outputs/local_national_co2_emissions_sector.csv",
  check.names = F)
) %>% rename(units = Units, x = year) %>% 
  mutate(class = case_when(class == "transportation" ~ "transport", T~class))

# combine local and gcam data
all_national_co2_emissions_sector <- dplyr::bind_rows(
  gcam_co2_emiss_th, local_national_co2_emissions_sector, gcam_co2_emiss_th_noInt
)
```

<br>

```{r national co2 emissions total, fig.dim=c(8,3), fig.cap="**National total CO2 emissions from 1986 to 2100 (left) and 1986 to 2015 (right) from GCAM output (blue) and local data (red). Local data source: [Energy Policy and Planning Office](http://www.eppo.go.th/index.php/en/en-energystatistics/co2-statistic)**"}

# 1986 to 2015
national_co2_emissions_plot_local <- rchart::chart( dplyr::filter(
  all_national_co2_emissions_sector, x >= 1986, x <= 2015),
  chart_type = "param_absolute",
  save = F
)

p1 <- national_co2_emissions_plot_local$chart_param +
  ggplot2::ylab("") + ggplot2::ggtitle("") +
  ggplot2::theme(strip.text = ggplot2::element_blank())


# 2000 to 2100
national_co2_emissions_plot_gcam <- rchart::chart(dplyr::filter(
  all_national_co2_emissions_sector, x >= 1986),
  chart_type = "param_absolute",
  save = F)

p2 <- national_co2_emissions_plot_gcam$chart_param +
  ggplot2::ylab("CO2 emissions (MT)") + ggplot2::ggtitle("") +
  ggplot2::theme(strip.text = ggplot2::element_blank())

ggpubr::ggarrange(p2, p1, align = "h", common.legend = T, legend = "bottom") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))

```

```{r national co2 emissions by sector plot, fig.dim=c(12,4), fig.cap="**National total CO2 emissions by sector from local data (left) and GCAM output (right) from 2005 to 2015. Local data source: [Energy Policy and Planning Office](http://www.eppo.go.th/index.php/en/en-energystatistics/co2-statistic)**"}

all_national_co2_emissions_sector_rename <-
  all_national_co2_emissions_sector %>% 
  mutate(class = case_when(class %in% c("building", "refining", "refined liquids enduse") ~ paste0("other: ", class),
                           T ~ class))

# 2005 to 2015
national_co2_emissions_sector_plot_local <- rchart::chart( dplyr::filter(
  all_national_co2_emissions_sector_rename, x >= 2005, x <= 2015, x %% 5 == 0),
  chart_type = "class_absolute",
  save = F
)

national_co2_emissions_sector_plot_local$chart_class +
  ggplot2::ggtitle("") + ggplot2::ylab("CO2 Emissions (MT)") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))
```

#### Electricity 

```{r elec consump th data prep}
# read in local data
local_national_elec_consump <- read.csv(
  "../data/thailand/validation/local_national_elec_consump.csv"
)

# aggregate local sectors
local_national_elec_consump_agg <- dplyr::bind_rows(
  aggregate_rows(local_national_elec_consump, class, "industry", industry_group_local),
  aggregate_rows(local_national_elec_consump, class, "building", building_group_local),
  aggregate_rows(local_national_elec_consump, class, "other", other_group_local)) %>% 
  rename(x = year, units = Units) %>% 
  mutate(units = "Electricity Consumption by Sector (TWh)")

gcam_elec_consump_th <- ref %>% 
  filter(param == "elecConsumByDemandSectorTWh",
         region == "All of Thailand",
         x >= 2000) %>% 
  select(x, units, region, scenario, value, class) %>% 
  mutate(value = value*.0036, region = "Thailand")
  

# combine local and national data
all_elec_consump_sector_national <- dplyr::full_join(
  dplyr::ungroup(local_national_elec_consump_agg),
  dplyr::ungroup(gcam_elec_consump_th))

```

<br>
```{r national consumption total charts, fig.dim=c(8,4), fig.cap="**National electricity consumption from 2005 to 2100 (left) and 2011 to 2020 (right) from GCAM output (blue) and local utilities data (red). Local data source: [Energy Policy and Planning office](http://www.eppo.go.th/index.php/en/en-energystatistics/electricity-statistic)**"}

# 2010 to 2020 total elec consump
elec_consump_national_chart_local <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_national, x <= 2020, x >= 2010),
  chart_type = "param_absolute",
  save = F)

p1 <- elec_consump_national_chart_local$chart_param +
        ggplot2::theme(strip.text = ggplot2::element_blank(),
                       plot.margin = ggplot2::unit(c(0,0,1,0), "cm")) +
        ggplot2::ylab("") + ggplot2::ggtitle("") 


# 2000 to 2100 total elec consump
elec_consump_national_chart_gcam <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_national, x >= 2000),
  chart_type = "param_absolute",
  save = F
)

p2 <- elec_consump_national_chart_gcam$chart_param +
        ggplot2::ylab("Electricity Consumption (EJ)") +
        ggplot2::theme(strip.text = ggplot2::element_blank(),
                       plot.margin = ggplot2::unit(c(0,0,1,0), "cm"),
                       axis.title.y = ggplot2::element_text(size = 12)) +
        ggplot2::ggtitle("")


ggpubr::ggarrange(p2, p1, nrow = 1, common.legend = T, legend = "bottom") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))

```

<br>
```{r national elec consumption by sector, fig.dim=c(9,4), fig.cap="**Figure National electricity consumption by sector in 2015 and 2020 from local utilities data (left) and GCAM output (right). Local data source: [Energy Policy and Planning office](http://www.eppo.go.th/index.php/en/en-energystatistics/electricity-statistic)**"}
# 2015, 2020 chart elec consump by sector
elec_consump_sector_national_chart_local <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_national, x %in% c(2015,2020)),
  chart_type = "class_absolute",
  save = F)

elec_consump_sector_national_chart_local$chart_class +
  ggplot2::ylab("Electricity Consumption (EJ)") +
  ggplot2::ggtitle("") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"),
                 axis.title.y = ggplot2::element_text(size = 12))
```

<br>

#### Energy

```{r national final energy data prep}

######## by fuel ########

# read  gcam data
gcam_final_energy_fuel <- ref %>% 
  filter(region == "All of Thailand",
         param == "energyFinalByFuelEJ",
         x >= 1990) %>% 
  select(x, units, value, region, scenario, class) %>% 
  mutate(class = case_when(class == "liquids" ~"refined liquids",
                           T ~ class),
         region = "Thailand")

# version without industrial feedstocks
gcam_final_energy_fuel_noFeed <- ref %>% 
  filter(region == "All of Thailand",
         param == "energyFinalByFuelEJNoFeedstock",
         x >= 1990) %>% 
  select(x, units, value, region, scenario, class) %>% 
  mutate(class = case_when(class == "liquids" ~"refined liquids",
                           T ~ class),
         region = "Thailand",
         scenario = "Ref- No Feedstocks")

# read in local data
local_national_final_energy_fuel <- read.csv(
  "../data/thailand/outputs/local_national_final_energy_fuel.csv",
  check.names = F
)

# aggregate fuel types for local data
local_national_final_energy_fuel_agg <- dplyr::bind_rows(
  aggregate_rows(local_national_final_energy_fuel, class,
                 "electricity", electricity_group_local),
  aggregate_rows(local_national_final_energy_fuel, class,
                 "refined liquids", liquids_group_local),
  aggregate_rows(local_national_final_energy_fuel, class,
                 "gas", gas_group_local),
  aggregate_rows(local_national_final_energy_fuel, class,
                 "coal", coal_group_local)
) %>% 
  rename(units = Units, x = year)

# combine local and gcam data
all_national_final_energy_fuel <- dplyr::bind_rows(
  local_national_final_energy_fuel_agg, gcam_final_energy_fuel, gcam_final_energy_fuel_noFeed
)



######### by sector ##########
# read in gcam data
gcam_final_energy_sector <- ref %>% 
  filter(region == "All of Thailand",
         param == "energyFinalConsumBySecEJ",
         x >= 2000) %>% 
  select(x, units, value, region, scenario, class) %>% 
  mutate(region = "Thailand")

# version without industrial feedstocks
gcam_final_energy_sector_noFeed <- ref %>% 
  filter(region == "All of Thailand",
         param == "energyFinalConsumBySecEJNoFeedstock",
         x >= 2000) %>% 
  select(x, units, value, region, scenario, class) %>% 
  mutate(region = "Thailand",
         scenario = "Ref- No Feedstocks")

# read in local data
local_national_final_energy_sector <- dplyr::mutate(read.csv(
  "../data/thailand/outputs/local_national_final_energy_sector.csv",
  check.names = F
),value = value/23884.58966)

# aggregate fuel types for local data
local_national_final_energy_sector_agg <- dplyr::bind_rows(
  aggregate_rows(local_national_final_energy_sector, class,
                 "industry", industry_group_local),
  aggregate_rows(local_national_final_energy_sector, class,
                 "building", building_group_local),
  aggregate_rows(local_national_final_energy_sector, class,
                 "transport", transport_group_local)
) %>% 
  rename(units = Units, x = year)

# combine gcam and local data
all_national_final_energy_sector <- dplyr::bind_rows(
  local_national_final_energy_sector_agg, gcam_final_energy_sector, gcam_final_energy_sector_noFeed
)


```

<br>

There is a large discrepancy in the industrial energy consumption reported by EEP2018 versus GCAM in historical years. One explanation could be that the EEP2018 does not account for energy from industrial feedstocks while GCAM does. Each figure below includes the default GCAM output ("Ref") as well as a version of the GCAM output that does not include industrial feedstocks ("Ref- No Feedstocks").

```{r national final energy total charts, fig.dim=c(8,4), fig.cap="**National total final energy from 1986 to 2100 (left) and 1986 to 2020 (right) from GCAM output (blue) and local data (red). Local data source: [Energy Policy and Planning Office](http://www.eppo.go.th/index.php/en/en-energystatistics/summary-statistic?orders[publishUp]=publishUp&issearch=1)**"}

# total final energy, 1986 to 2020
national_final_energy_chart_local <- rchart::chart(
  dplyr::filter(all_national_final_energy_fuel, x <= 2020),
  chart_type = "param_absolute",
  save = F
)

p1 <- national_final_energy_chart_local$chart_param +
        ggplot2::ylab("") +
        ggplot2::theme(strip.text = ggplot2::element_blank(),
                       plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm")) +
        ggplot2::ggtitle("") 


# total final energy, 1986 to 2070
national_final_energy_chart_gcam <- rchart::chart(
  all_national_final_energy_fuel,
  chart_type = "param_absolute",
  save = F
)

p2 <- national_final_energy_chart_gcam$chart_param +
      ggplot2::ylab("Energy (EJ)") +
      ggplot2::theme(strip.text = ggplot2::element_blank()) +
      ggplot2::ggtitle("") +
      ggplot2::scale_y_continuous(breaks = scales::pretty_breaks())

ggpubr::ggarrange(p2, p1, nrow = 1, common.legend = T, legend = "bottom", 
                  widths = c(1,0.975)) +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))

```

<br>


```{r national final energy consumption by sector, fig.dim=c(12,4), fig.cap="**National total final energy by sector from local data (left), GCAM output (middle), and GCAM output without industrial feedstocks (right) in 2015. Local data source: [Energy Efficiency Plan 2018](https://www.dede.go.th/ewt_w3c/ewt_dl_link.php?filename=index&nid=54495)**"}

# 2005 to 2020 final energy by fuel (gcam and local)
final_energy_sector_chart_local <- rchart::chart(dplyr::filter(
  all_national_final_energy_sector, x == 2015),
  save = F)

final_energy_sector_chart_local$chart_class +
  ggplot2::ggtitle("") + ggplot2::ylab("Energy (EJ)") + ylim(c(0,5))
```

<br>

There is a similar discrepancy between GCAM historical data and EPPO's energy consumption by fuel data. One cause of this discrepancy could be that EPPO does not include biomass energy.

```{r national final energy consumption by fuel, fig.dim=c(12,4), fig.cap="**National total final energy by fuel from local data (left), GCAM output (middle), and GCAM output without industrial feedstocks (right) from 2005 to 2020. Local data source: [Energy Policy and Planning Office](http://www.eppo.go.th/index.php/en/en-energystatistics/summary-statistic?orders[publishUp]=publishUp&issearch=1)**"}

# 2005 to 2020 final energy by fuel (gcam and local)
final_energy_fuel_chart_local <- rchart::chart(dplyr::filter(
  all_national_final_energy_fuel, x >= 2005, x <= 2020, x %% 5 == 0),
  chart_type = "class_absolute",
  save = F)

final_energy_fuel_chart_local$chart_class +
  ggplot2::ggtitle("") + ggplot2::ylab("Energy (EJ)") + ylim(c(0,5.5))
```

<br>
<br>


#### Transportation

```{r transportation-th data prep}
# read in local data
local_national_transport_ghg <- read.csv(
  "../data/thailand/outputs/local_transport_ghg_emissions_mode.csv",
  check.names = F, skip = 1
) %>% 
  rename(units = Units, x = year) %>% 
  mutate(class = str_to_title(class))
  

# read in gcam data
gcam_ghg_mode <- ref %>% 
  filter(region == "All of Thailand",
         param %in% c("transportFreightGHGByMode", "transportPassengerGHGByMode"),
         x >= 1990) %>% 
  select(x, units, value, region, scenario, class) %>% 
  mutate(class = case_when(grepl("Bus|LDV|Road", class) ~ "Road",
                           grepl("Rail", class) ~ "Rail",
                           T ~ class),
         region = "Thailand")

# gcam_ghg_subsector <- process_gcam_data(conv_ghg_co2e(process_gcam_data(
#   read.csv("../data/thailand/outputs/queryoutall_non_co2_emissions_subsector.csv", skip = 1, check.names = F))),
#   processed = T, subsector, sector, GHG)


# combine GCAM and local data
all_national_transport_ghg <- dplyr::ungroup(dplyr::bind_rows(gcam_ghg_mode, local_national_transport_ghg))

```

```{r national transport ghg total, fig.dim = c(9,4), fig.cap="**National GHG emissions in transportation from GCAM output (blue) and local data (red). Local data source: [Ministry of Transport](https://datagov.mot.go.th/dataset/transport-ghg)**"}
transport_ghg_chart1 <- rchart::chart(dplyr::filter(
  all_national_transport_ghg, x >= 2000),
  save = F)

p1 <- transport_ghg_chart1$chart_param +
  ggplot2::ylab("GHG Emissions (MT CO2eq)") + ggplot2::ggtitle("") +
  ggplot2::theme(axis.title.y = ggplot2::element_text(size = 12))

transport_ghg_chart2 <- rchart::chart(dplyr::filter(
  all_national_transport_ghg, x >= 2000, x <= 2020),
  save = F)

p2 <- transport_ghg_chart2$chart_param +
  ggplot2::ylim(c(0, 100)) +
  ggplot2::ylab("") + ggplot2::ggtitle("")
ggpubr::ggarrange(p1, p2, nrow = 1, common.legend = T, legend = "bottom") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))
```

```{r national transport output by mode, fig.dim=c(9,4), fig.cap="**National GHG emissions by transportation mode from local data (left) and GCAM output (right). Local data source: [Ministry of Transport](https://datagov.mot.go.th/dataset/transport-ghg)**"}

# 2005 to 2020 final energy by fuel (gcam and local)
national_transport_ghg_chart <- rchart::chart(dplyr::filter(
  all_national_transport_ghg, x >= 2005, x < 2020, x %% 5 == 0),
  chart_type = "class_absolute",
  save = F)

national_transport_ghg_chart$chart_class +
  ggplot2::ggtitle("") + ggplot2::ylab("GHG Emissions (MTCO2eq)")
```

### MEA area {.tabset}

#### Electricity 

We have only found local data in the MEA area for electricity consumption. The following plots compare this local data to the GCAM reference scenario for total electricity consumption and electricity consumption by sector. Note that industrial energy consumption is much higher in the GCAM output than the local data in both 2015 and 2020. We are currently allocating industrial shares to subregions based on GDP, but we plan to adjust this methodology to reflect the fact that the Bangkok metropolitan area has less industrial activities than non-metropolitan areas despite having a higher per capita GDP.

```{r elec consump mea data prep}
# read in local data
local_mea_elec_consump <- tidyr::drop_na(read.csv(
  "../data/thailand/validation/local_mea_area_elec_consump.csv"
))

# aggregate local sectors
local_mea_elec_consump_agg <- dplyr::bind_rows(
  aggregate_rows(local_mea_elec_consump, class, "industry", industry_group_local),
  aggregate_rows(local_mea_elec_consump, class, "building", building_group_local),
  aggregate_rows(local_mea_elec_consump, class, "other", other_group_local)) %>% 
  rename(x = year, units = Units) %>% 
  mutate(units = "Electricity Consumption by Sector (TWh)")

gcam_elec_consump_mea <- ref %>% 
  filter(param == "elecConsumByDemandSectorTWh",
         region == "MEA area",
         x >= 2000) %>% 
  select(x, units, region, scenario, value, class) %>% 
  mutate(value = value*.0036)
  

# combine local and national data
all_elec_consump_sector_mea <- dplyr::full_join(
  dplyr::ungroup(local_mea_elec_consump_agg),
  dplyr::ungroup(gcam_elec_consump_mea))

```

<br>
```{r mea consumption total charts, fig.dim=c(8,4), fig.cap="**Electricity consumption in the MEA service area from 2005 to 2100 (left) and 2011 to 2020 (right) from GCAM output (blue) and MEA data (red). Local data source: [Energy Policy and Planning office](http://www.eppo.go.th/index.php/en/en-energystatistics/electricity-statistic)**"}

# 2010 to 2020 total elec consump
elec_consump_mea_chart_local <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_mea, x <= 2020, x >= 2010),
  chart_type = "param_absolute",
  save = F)

p1 <- elec_consump_mea_chart_local$chart_param +
        ggplot2::theme(strip.text = ggplot2::element_blank(),
                       plot.margin = ggplot2::unit(c(0,0,1,0), "cm")) +
        ggplot2::ylab("") + ggplot2::ggtitle("") 


# 2000 to 2100 total elec consump
elec_consump_mea_chart_gcam <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_mea, x >= 2000),
  chart_type = "param_absolute",
  save = F
)

p2 <- elec_consump_mea_chart_gcam$chart_param +
        ggplot2::ylab("Electricity Consumption (EJ)") +
        ggplot2::theme(strip.text = ggplot2::element_blank(),
                       plot.margin = ggplot2::unit(c(0,0,1,0), "cm"),
                       axis.title.y = ggplot2::element_text(size = 12)) +
        ggplot2::ggtitle("")


ggpubr::ggarrange(p2, p1, nrow = 1, common.legend = T, legend = "bottom") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"))

```

<br>
```{r mea consumption by sector, fig.dim=c(9,4), fig.cap="**Electricity consumption by sector in the MEA service area from MEA data (left) and GCAM output (right) in 2015 and 2020. Local data source: [Energy Policy and Planning office](http://www.eppo.go.th/index.php/en/en-energystatistics/electricity-statistic)**"}
# 2015, 2020 chart elec consump by sector
elec_consump_sector_mea_chart_local <- rchart::chart(
  dplyr::filter(all_elec_consump_sector_mea, x %in% c(2015,2020)),
  chart_type = "class_absolute",
  save = F)

elec_consump_sector_mea_chart_local$chart_class +
  ggplot2::ylab("Electricity Consumption (EJ)") +
  ggplot2::ggtitle("") +
  ggplot2::theme(plot.margin = ggplot2::unit(c(0,0,0.5,0), "cm"),
                 axis.title.y = ggplot2::element_text(size = 12))
```


# {.unlisted .unnumbered}
```{r child = 'footer.rmd'}
```
